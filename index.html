<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Rezervaƒçn√≠ syst√©m - Chata Mari√°nsk√°</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="/favicon.ico"
    />
    <link
      rel="stylesheet"
      href="css/styles-unified.css"
    />
    <link
      rel="stylesheet"
      href="css/mobile-improvements.css"
    />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1 class="logo">Chata Mari√°nsk√°</h1>
          <nav class="nav">
            <!-- Language Switch -->
            <div class="language-switch">
              <span class="lang-label">CZ</span>
              <label
                class="switch"
                for="languageSwitch"
                aria-label="Switch language"
              >
                <input
                  type="checkbox"
                  id="languageSwitch"
                  role="switch"
                  aria-checked="false"
                />
                <span class="slider"></span>
              </label>
              <span class="lang-label">EN</span>
            </div>

            <button
              id="roomInfoBtn"
              class="btn btn-secondary"
            >
              <span style="font-size: 1.2em; margin-right: 0.5rem">‚ÑπÔ∏è</span>
              <span
                class="btn-text"
                data-translate="roomInfo"
                >Informace o pokoj√≠ch</span
              >
            </button>
            <button
              id="bulkActionBtn"
              class="btn btn-primary"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <rect
                  x="3"
                  y="4"
                  width="18"
                  height="18"
                  rx="2"
                  ry="2"
                />
                <line
                  x1="16"
                  y1="2"
                  x2="16"
                  y2="6"
                />
                <line
                  x1="8"
                  y1="2"
                  x2="8"
                  y2="6"
                />
                <line
                  x1="3"
                  y1="10"
                  x2="21"
                  y2="10"
                />
                <path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01" />
              </svg>
              <span
                class="btn-text"
                data-translate="bulkBooking"
                >Hromadn√° akce</span
              >
            </button>
            <button
              id="adminBtn"
              class="btn btn-secondary"
              data-translate="admin"
            >
              Admin
            </button>
          </nav>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Calendar Section -->
        <section class="calendar-section">
          <div class="calendar-header">
            <button
              id="prevMonth"
              class="nav-btn"
              aria-label="P≈ôedchoz√≠ mƒõs√≠c"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M15 18l-6-6 6-6" />
              </svg>
            </button>
            <h2
              id="currentMonth"
              class="month-title"
            ></h2>
            <button
              id="nextMonth"
              class="nav-btn"
              aria-label="Dal≈°√≠ mƒõs√≠c"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M9 18l6-6-6-6" />
              </svg>
            </button>
          </div>
          <div
            id="calendar"
            class="calendar-grid"
          ></div>

          <!-- Legend Toggle Button -->
          <div class="legend-toggle-container">
            <button
              id="legendToggle"
              class="legend-toggle-btn"
              aria-expanded="false"
            >
              <span class="legend-toggle-icon">‚ùì</span>
              <span
                class="legend-toggle-text"
                data-translate="showLegend"
                >Zobrazit legendu</span
              >
              <span class="legend-toggle-arrow">‚ñº</span>
            </button>
          </div>

          <!-- Comprehensive Legend -->
          <div
            id="calendarLegend"
            class="calendar-legend legend-hidden"
          >
            <!-- Room States -->
            <div class="legend-section">
              <h3
                class="legend-title"
                data-translate="legendRoomStates"
              >
                Stavy pokoj≈Ø
              </h3>
              <div class="legend-items">
                <div class="legend-item">
                  <span
                    class="legend-color"
                    style="background: #10b981"
                  ></span>
                  <div class="legend-text">
                    <strong data-translate="legendAvailable">Voln√Ω pokoj</strong>
                    <p data-translate="legendAvailableDesc">Pokoj je k dispozici pro rezervaci</p>
                  </div>
                </div>
                <div class="legend-item">
                  <span class="legend-color legend-gradient-edge"></span>
                  <div class="legend-text">
                    <strong data-translate="legendEdge">Krajn√≠ den rezervace</strong>
                    <p data-translate="legendEdgeDesc">
                      Jedna noc kolem dne je obsazena - klikateln√Ω pro novou rezervaci (oran≈æov√Ω
                      gradient)
                    </p>
                  </div>
                </div>
                <div class="legend-item">
                  <span
                    class="legend-color"
                    style="background: #ef4444"
                  ></span>
                  <div class="legend-text">
                    <strong data-translate="legendBooked">Obsazen√Ω pokoj</strong>
                    <p data-translate="legendBookedDesc">
                      Obƒõ noci kolem dne jsou obsazeny (ƒçerven√Ω)
                    </p>
                  </div>
                </div>
                <div class="legend-item">
                  <span
                    class="legend-color"
                    style="
                      background: repeating-linear-gradient(
                        45deg,
                        #ef4444,
                        #ef4444 3px,
                        #dc2626 3px,
                        #dc2626 6px
                      );
                      position: relative;
                    "
                  >
                    <span
                      style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        font-size: 0.8rem;
                      "
                      >‚ùå</span
                    >
                  </span>
                  <div class="legend-text">
                    <strong data-translate="legendBlocked">Blokovan√Ω pokoj</strong>
                    <p data-translate="legendBlockedDesc">Pokoj je administrativnƒõ blokov√°n ‚ùå</p>
                  </div>
                </div>
                <div class="legend-item">
                  <span
                    class="legend-color"
                    style="background: #eab308"
                  ></span>
                  <div class="legend-text">
                    <strong data-translate="legendProposed">Navrhovan√° rezervace</strong>
                    <p data-translate="legendProposedDesc">
                      Rezervace ƒçekaj√≠c√≠ na dokonƒçen√≠ (≈ælut√° barva)
                    </p>
                  </div>
                </div>
                <div class="legend-item">
                  <span
                    class="legend-color"
                    style="border: 2px solid #f59e0b; background: transparent; position: relative"
                  >
                    <span
                      style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        font-size: 0.9rem;
                      "
                      >üéÑ</span
                    >
                  </span>
                  <div class="legend-text">
                    <strong data-translate="legendChristmas">V√°noƒçn√≠ obdob√≠</strong>
                    <p data-translate="legendChristmasDesc">
                      Speci√°ln√≠ obdob√≠ s omezen√Ωm p≈ô√≠stupem
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Report Bugs Section -->
            <div
              class="legend-section"
              style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--gray-200)"
            >
              <div class="legend-instructions">
                <div class="instruction-item">
                  <span class="instruction-icon">üìß</span>
                  <span>
                    <span data-translate="contactErrorsWriteTo">V p≈ô√≠padƒõ chyb pi≈°te na:</span>
                    <a
                      href="mailto:prusek@utia.cas.cz"
                      style="
                        color: var(--primary-color);
                        text-decoration: underline;
                        margin-left: 0.25rem;
                      "
                      >prusek@utia.cas.cz</a
                    >
                  </span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Booking Form Section -->
        <section
          class="booking-section"
          id="tempReservationsSection"
          style="display: none"
        >
          <div class="booking-card">
            <!-- Temporary Reservations Display -->
            <div
              id="tempReservationsContainer"
              style="display: none; margin-top: 1.5rem"
            >
              <h3 style="color: var(--primary-color); margin-bottom: 1rem">
                <span data-translate="pendingReservations">P≈ôipraven√© rezervace</span>
              </h3>
              <div
                id="tempReservationsList"
                class="temp-reservations-list"
              >
                <!-- Temporary reservations will be displayed here -->
              </div>
              <div
                class="temp-reservations-summary"
                style="
                  margin-top: 1rem;
                  padding: 1rem;
                  background: var(--card-bg);
                  border-radius: 8px;
                  border: 2px solid var(--primary-color);
                "
              >
                <div style="display: flex; justify-content: space-between; align-items: center">
                  <span style="font-size: 1.2rem; font-weight: bold">
                    <span data-translate="totalPrice">Celkov√° cena</span>:
                  </span>
                  <span
                    id="tempReservationsTotalPrice"
                    style="font-size: 1.4rem; font-weight: bold; color: var(--primary-color)"
                    >0 Kƒç</span
                  >
                </div>
              </div>
            </div>

            <!-- Finalize Reservations Button - show only when there are reservations -->
            <div
              id="finalizeReservationsDiv"
              style="margin-top: 1.5rem; text-align: center; display: none"
            >
              <button
                id="finalizeReservationsBtn"
                class="btn btn-primary"
                onclick="finalizeAllReservations()"
              >
                <span data-translate="finalizeReservations">Dokonƒçit v≈°echny rezervace</span>
              </button>
            </div>
          </div>
        </section>
      </main>

      <!-- Booking Details Modal -->
      <div
        id="bookingModal"
        class="modal"
      >
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <h2>Detail rezervace</h2>
          <div id="bookingDetails"></div>
          <div class="modal-actions">
            <button
              id="contactOwner"
              class="btn btn-primary"
            >
              Kontaktovat vlastn√≠ka
            </button>
          </div>
        </div>
      </div>

      <!-- Final Booking Form Modal -->
      <div
        id="finalBookingModal"
        class="modal"
      >
        <div
          class="modal-content"
          style="max-width: 600px"
        >
          <button
            class="modal-close"
            onclick="closeFinalBookingModal()"
          >
            &times;
          </button>
          <h2 data-translate="completeBooking">Dokonƒçit rezervaci</h2>

          <!-- Reservations Summary -->
          <div
            style="
              background: var(--gray-50);
              padding: 1rem;
              border-radius: 8px;
              margin-bottom: 1.5rem;
            "
          >
            <h3 style="margin-top: 0; color: var(--primary-color)">
              <span data-translate="reservationSummary">Souhrn rezervace</span>
            </h3>
            <div id="finalBookingSummary"></div>
            <div
              style="
                margin-top: 1rem;
                padding-top: 1rem;
                border-top: 2px solid var(--primary-color);
              "
            >
              <div style="display: flex; justify-content: space-between; align-items: center">
                <span style="font-weight: bold; font-size: 1.1rem">
                  <span data-translate="totalPrice">Celkov√° cena</span>:
                </span>
                <span
                  id="finalBookingTotalPrice"
                  style="font-weight: bold; font-size: 1.2rem; color: var(--primary-color)"
                  >0 Kƒç</span
                >
              </div>
            </div>
          </div>

          <!-- Contact Form -->
          <form id="finalBookingForm">
            <h3 data-translate="contactDetails">Kontaktn√≠ √∫daje</h3>

            <div class="input-group">
              <label
                for="finalBookingName"
                data-translate="fullName"
                >Jm√©no a p≈ô√≠jmen√≠ *</label
              >
              <input
                type="text"
                id="finalBookingName"
                required
              />
            </div>

            <div class="input-group">
              <label
                for="finalBookingEmail"
                data-translate="email"
                >Email *</label
              >
              <input
                type="email"
                id="finalBookingEmail"
                required
              />
            </div>

            <div class="input-group">
              <label
                for="finalBookingPhone"
                data-translate="phone"
                >Telefon *</label
              >
              <div class="phone-input-container">
                <select
                  id="finalBookingCountryCode"
                  name="finalBookingCountryCode"
                  class="phone-prefix-select"
                >
                  <option value="+420">+420 (CZ)</option>
                  <option value="+421">+421 (SK)</option>
                  <option value="+1">+1 (US)</option>
                  <option value="+44">+44 (UK)</option>
                  <option value="+49">+49 (DE)</option>
                  <option value="+33">+33 (FR)</option>
                  <option value="+43">+43 (AT)</option>
                  <option value="+48">+48 (PL)</option>
                  <option value="+386">+386 (SI)</option>
                </select>
                <input
                  type="tel"
                  id="finalBookingPhone"
                  class="phone-number-input"
                  placeholder="123456789"
                  pattern="[0-9\s]{9,13}"
                  title="Zadejte 9 ƒç√≠slic telefonn√≠ho ƒç√≠sla"
                  required
                />
              </div>
            </div>

            <h3 data-translate="billingDetails">Fakturaƒçn√≠ √∫daje</h3>

            <div class="input-group">
              <label for="finalBookingCompany">Firma</label>
              <input
                type="text"
                id="finalBookingCompany"
                minlength="2"
              />
            </div>

            <div class="input-group">
              <label for="finalBookingAddress">Ulice a ƒç√≠slo *</label>
              <input
                type="text"
                id="finalBookingAddress"
                required
                minlength="5"
              />
            </div>

            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem">
              <div class="input-group">
                <label for="finalBookingCity">Mƒõsto *</label>
                <input
                  type="text"
                  id="finalBookingCity"
                  required
                  minlength="2"
                />
              </div>
              <div class="input-group">
                <label for="finalBookingZip">PSƒå *</label>
                <input
                  type="text"
                  id="finalBookingZip"
                  required
                  pattern="[0-9]{5}"
                  maxlength="5"
                />
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem">
              <div class="input-group">
                <label for="finalBookingIco">IƒåO</label>
                <input
                  type="text"
                  id="finalBookingIco"
                  pattern="[0-9]{8}"
                  maxlength="8"
                />
              </div>
              <div class="input-group">
                <label
                  for="finalBookingDic"
                  data-translate="dic"
                  >DIƒå</label
                >
                <input
                  type="text"
                  id="finalBookingDic"
                  pattern="[A-Z]{2}[0-9]{8,10}"
                  placeholder="CZ12345678"
                />
              </div>
            </div>

            <div class="input-group">
              <label
                for="finalBookingNotes"
                data-translate="notes"
                >Pozn√°mky</label
              >
              <textarea
                id="finalBookingNotes"
                rows="3"
              ></textarea>
            </div>

            <!-- Guest Names Section (dynamically generated) -->
            <div
              id="guestNamesSection"
              style="display: none; margin-top: 2rem"
            >
              <h3
                style="margin-bottom: 1rem; color: var(--primary-color)"
                data-translate="guestNamesTitle"
              >
                Jm√©na host≈Ø *
              </h3>

              <!-- Adults Section -->
              <div
                id="adultsNamesContainer"
                style="margin-bottom: 1.5rem"
              >
                <h4
                  style="
                    margin-bottom: 0.75rem;
                    font-size: 1rem;
                    color: var(--gray-700);
                    border-bottom: 2px solid var(--gray-200);
                    padding-bottom: 0.5rem;
                  "
                  data-translate="adultsSectionTitle"
                >
                  Dospƒõl√≠
                </h4>
                <div
                  id="adultsNamesList"
                  class="guest-names-grid"
                  style="display: grid; gap: 1rem"
                >
                  <!-- Adult name inputs will be dynamically generated here -->
                </div>
              </div>

              <!-- Children Section -->
              <div
                id="childrenNamesContainer"
                style="display: none; margin-bottom: 1.5rem"
              >
                <h4
                  style="
                    margin-bottom: 0.75rem;
                    font-size: 1rem;
                    color: var(--gray-700);
                    border-bottom: 2px solid var(--gray-200);
                    padding-bottom: 0.5rem;
                  "
                  data-translate="childrenSectionTitle"
                >
                  Dƒõti (3-17 let)
                </h4>
                <div
                  id="childrenNamesList"
                  class="guest-names-grid"
                  style="display: grid; gap: 1rem"
                >
                  <!-- Children name inputs will be dynamically generated here -->
                </div>
              </div>
            </div>

            <!-- Christmas Access Code (conditionally shown) -->
            <div
              class="input-group"
              id="finalChristmasCodeGroup"
              style="display: none"
            >
              <label
                for="finalChristmasCode"
                data-translate="christmasCodeLabel"
                >V√°noƒçn√≠ p≈ô√≠stupov√Ω k√≥d</label
              >
              <input
                type="text"
                id="finalChristmasCode"
                name="finalChristmasCode"
                placeholder=""
                data-translate-placeholder="christmasCodePlaceholder"
              />
              <small
                style="color: var(--warning-color); display: block; margin-top: 0.25rem"
                data-translate="christmasCodeRequired"
              >
                Pro rezervace ve v√°noƒçn√≠m obdob√≠ je vy≈æadov√°n p≈ô√≠stupov√Ω k√≥d
              </small>
            </div>

            <div
              class="input-group"
              style="margin-top: 1rem"
            >
              <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer">
                <input
                  type="checkbox"
                  id="finalBookingBenefit"
                  style="width: auto; margin: 0"
                />
                <span data-translate="paymentFromBenefit">Platba z benefit≈Ø</span>
              </label>
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 1.5rem">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="closeFinalBookingModal()"
              >
                <span data-translate="cancel">Zru≈°it</span>
              </button>
              <button
                type="submit"
                class="btn btn-primary"
              >
                <span data-translate="confirmBooking">Potvrdit rezervaci</span>
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Contact Form Modal -->
      <div
        id="contactModal"
        class="modal"
      >
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <h2 data-translate="contactOwnerTitle">Kontaktovat vlastn√≠ka rezervace</h2>
          <div
            style="
              background: var(--gray-50);
              padding: 1rem;
              border-radius: var(--radius-md);
              margin-bottom: 1.5rem;
            "
          >
            <p
              style="font-size: 0.9rem; color: var(--gray-600); margin: 0"
              data-translate="contactOwnerInfo"
            >
              Va≈°e zpr√°va bude odesl√°na vlastn√≠kovi rezervace. Email vlastn√≠ka z≈Øst√°v√° skryt√Ω.
            </p>
          </div>
          <form id="contactForm">
            <div class="input-group">
              <label
                for="contactEmail"
                data-translate="yourEmail"
                >V√°≈° email *</label
              >
              <input
                type="email"
                id="contactEmail"
                required
              />
            </div>
            <div class="input-group">
              <label
                for="contactMessage"
                data-translate="message"
                >Zpr√°va *</label
              >
              <textarea
                id="contactMessage"
                rows="5"
                required
                placeholder="Napi≈°te svou zpr√°vu..."
              ></textarea>
            </div>
            <button
              type="submit"
              class="btn-primary"
              data-translate="sendMessage"
            >
              Odeslat zpr√°vu
            </button>
          </form>
        </div>
      </div>

      <!-- Booking Form Modal -->
      <div
        id="bookingFormModal"
        class="modal"
      >
        <div class="modal-content">
          <button
            class="modal-close"
            id="bookingFormModalClose"
          >
            &times;
          </button>
          <h2 data-translate="completeBooking">Dokonƒçen√≠ rezervace</h2>

          <!-- Booking Summary -->
          <div
            style="
              background: var(--gray-50);
              padding: 1rem;
              border-radius: var(--radius-md);
              margin-bottom: 2rem;
            "
          >
            <h3
              style="font-size: 1rem; margin-bottom: 1rem"
              data-translate="bookingSummary"
            >
              Souhrn rezervace
            </h3>
            <div
              id="bookingSummary"
              style="display: grid; gap: 0.5rem"
            >
              <!-- Summary will be populated here -->
            </div>
          </div>

          <!-- Booking Form -->
          <form id="bookingForm">
            <h3
              style="font-size: 1.1rem; margin-bottom: 1rem"
              data-translate="billingDetails"
            >
              Fakturaƒçn√≠ √∫daje
            </h3>

            <div class="form-grid">
              <div class="input-group">
                <label
                  for="name"
                  data-translate="fullName"
                  >Jm√©no a p≈ô√≠jmen√≠ *</label
                >
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  minlength="3"
                  data-translate-placeholder="namePlaceholder"
                  title="Zadejte cel√© jm√©no (min. 3 znaky)"
                />
              </div>

              <div class="input-group">
                <label
                  for="email"
                  data-translate="email"
                  >Email *</label
                >
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  data-translate-placeholder="emailPlaceholder"
                  pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}"
                  title="Zadejte platnou emailovou adresu"
                />
              </div>

              <div class="input-group">
                <label
                  for="phone"
                  data-translate="phone"
                  >Telefon *</label
                >
                <div class="phone-input-container">
                  <select
                    id="phonePrefix"
                    name="phonePrefix"
                    class="phone-prefix-select"
                  >
                    <option value="+420">+420 (CZ)</option>
                    <option value="+421">+421 (SK)</option>
                    <option value="+1">+1 (US)</option>
                    <option value="+44">+44 (UK)</option>
                    <option value="+49">+49 (DE)</option>
                    <option value="+33">+33 (FR)</option>
                    <option value="+43">+43 (AT)</option>
                    <option value="+48">+48 (PL)</option>
                    <option value="+386">+386 (SI)</option>
                  </select>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    class="phone-number-input"
                    required
                    data-translate-placeholder="phonePlaceholder"
                    pattern="[0-9\s]{9,13}"
                    title="Zadejte 9 ƒç√≠slic telefonn√≠ho ƒç√≠sla"
                  />
                </div>
              </div>

              <div class="input-group">
                <label
                  for="company"
                  data-translate="company"
                  >Firma</label
                >
                <input
                  type="text"
                  id="company"
                  name="company"
                  minlength="2"
                  data-translate-placeholder="companyPlaceholder"
                  title="Zadejte n√°zev firmy"
                />
              </div>

              <div class="input-group full-width">
                <label
                  for="address"
                  data-translate="address"
                  >Adresa *</label
                >
                <input
                  type="text"
                  id="address"
                  name="address"
                  required
                  minlength="5"
                  data-translate-placeholder="addressPlaceholder"
                  title="Zadejte ulici a ƒç√≠slo popisn√©"
                />
              </div>

              <div class="input-group">
                <label
                  for="city"
                  data-translate="city"
                  >Mƒõsto *</label
                >
                <input
                  type="text"
                  id="city"
                  name="city"
                  required
                  minlength="2"
                  data-translate-placeholder="cityPlaceholder"
                  title="Zadejte n√°zev mƒõsta"
                />
              </div>

              <div class="input-group">
                <label
                  for="zip"
                  data-translate="zip"
                  >PSƒå *</label
                >
                <input
                  type="text"
                  id="zip"
                  name="zip"
                  required
                  pattern="[0-9]{5}"
                  data-translate-placeholder="zipPlaceholder"
                  maxlength="5"
                  title="PSƒå mus√≠ obsahovat p≈ôesnƒõ 5 ƒç√≠slic"
                />
              </div>

              <div class="input-group">
                <label
                  for="ico"
                  data-translate="ico"
                  >IƒåO</label
                >
                <input
                  type="text"
                  id="ico"
                  name="ico"
                  pattern="[0-9]{8}"
                  data-translate-placeholder="icoPlaceholder"
                  maxlength="8"
                  title="IƒåO mus√≠ obsahovat 8 ƒç√≠slic (nepovinn√©)"
                />
              </div>

              <div class="input-group">
                <label
                  for="dic"
                  data-translate="dic"
                  >DIƒå</label
                >
                <input
                  type="text"
                  id="dic"
                  name="dic"
                  pattern="(CZ)?[0-9]{8,10}"
                  data-translate-placeholder="dicPlaceholder"
                  title="DIƒå ve form√°tu CZ12345678"
                />
              </div>
            </div>

            <div class="input-group full-width">
              <label
                for="notes"
                data-translate="notes"
              >
                Pozn√°mky
              </label>
              <textarea
                id="notes"
                name="notes"
                rows="3"
              ></textarea>
            </div>

            <!-- Guest Names Section for bookingFormModal (dynamically generated) -->
            <div
              id="bookingFormGuestNamesSection"
              class="guest-names-section"
              style="display: none; margin-top: 2rem"
            >
              <h3
                style="margin-bottom: 1rem; color: var(--primary-color)"
                data-translate="guestNamesTitle"
              >
                Jm√©na host≈Ø *
              </h3>

              <!-- Adults Section -->
              <div
                id="bookingFormAdultsNamesContainer"
                style="margin-bottom: 1.5rem"
              >
                <h4
                  style="
                    margin-bottom: 0.75rem;
                    font-size: 1rem;
                    color: var(--gray-700);
                    border-bottom: 2px solid var(--gray-200);
                    padding-bottom: 0.5rem;
                  "
                  data-translate="adultsSectionTitle"
                >
                  Dospƒõl√≠
                </h4>
                <div
                  id="bookingFormAdultsNamesList"
                  class="guest-names-grid"
                  style="display: grid; gap: 1rem"
                >
                  <!-- Adult name inputs will be dynamically generated here -->
                </div>
              </div>

              <!-- Children Section -->
              <div
                id="bookingFormChildrenNamesContainer"
                style="display: none; margin-bottom: 1.5rem"
              >
                <h4
                  style="
                    margin-bottom: 0.75rem;
                    font-size: 1rem;
                    color: var(--gray-700);
                    border-bottom: 2px solid var(--gray-200);
                    padding-bottom: 0.5rem;
                  "
                  data-translate="childrenSectionTitle"
                >
                  Dƒõti (3-17 let)
                </h4>
                <div
                  id="bookingFormChildrenNamesList"
                  class="guest-names-grid"
                  style="display: grid; gap: 1rem"
                >
                  <!-- Children name inputs will be dynamically generated here -->
                </div>
              </div>
            </div>

            <!-- Christmas Access Code (conditionally shown) -->
            <div
              class="input-group full-width"
              id="christmasCodeGroup"
              style="display: none"
            >
              <label
                for="christmasCode"
                data-translate="christmasCodeLabel"
                >V√°noƒçn√≠ p≈ô√≠stupov√Ω k√≥d</label
              >
              <input
                type="text"
                id="christmasCode"
                name="christmasCode"
                placeholder=""
                data-translate-placeholder="christmasCodePlaceholder"
              />
              <small
                style="color: var(--warning-color); display: block; margin-top: 0.25rem"
                data-translate="christmasCodeRequired"
              >
                Pro rezervace ve v√°noƒçn√≠m obdob√≠ je vy≈æadov√°n p≈ô√≠stupov√Ω k√≥d
              </small>
            </div>

            <div class="input-group full-width">
              <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer">
                <input
                  type="checkbox"
                  id="payFromBenefit"
                  name="payFromBenefit"
                  style="width: auto; margin: 0"
                />
                <span data-translate="paymentFromBenefit">Platba z benefit≈Ø</span>
              </label>
            </div>

            <div
              class="modal-actions"
              style="margin-top: 2rem"
            >
              <button
                type="button"
                class="btn btn-secondary"
                onclick="document.getElementById('bookingFormModal').classList.remove('active')"
                data-translate="cancel"
              >
                Zru≈°it
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                data-translate="confirmBooking"
              >
                Potvrdit rezervaci
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Single Room Booking Modal -->
      <div
        id="singleRoomBookingModal"
        class="modal"
      >
        <div class="modal-content compact-booking-modal">
          <button
            class="modal-close"
            onclick="window.app.singleRoomBooking.hideRoomBookingModal()"
          >
            &times;
          </button>

          <!-- Room Header -->
          <div class="booking-modal-header">
            <h2
              id="roomBookingTitle"
              data-translate="roomReservation"
            >
              Rezervace pokoje
            </h2>
            <div id="roomBookingBadge"></div>
          </div>

          <div class="booking-modal-content">
            <!-- Left Column: Calendar -->
            <div class="booking-left-column">
              <h3 data-translate="selectStayPeriod">Vyberte term√≠n pobytu</h3>

              <!-- Interactive Calendar -->
              <div
                id="miniCalendar"
                class="interactive-calendar"
              >
                <!-- Calendar will be generated here -->
              </div>
            </div>

            <!-- Right Column: Guest Details & Booking Form -->
            <div class="booking-right-column">
              <div class="booking-form-section">
                <!-- Date Selection Summary - moved here -->
                <div
                  id="dateSelectionSummary"
                  style="
                    margin-bottom: 1rem;
                    padding: 1rem;
                    background: #f0f9ff;
                    border-radius: 8px;
                    display: none;
                  "
                >
                  <div style="display: flex; justify-content: space-between; align-items: center">
                    <div>
                      <div
                        style="font-size: 0.9rem; color: #666"
                        data-translate="selectedPeriodLabel"
                      >
                        Vybran√Ω term√≠n:
                      </div>
                      <div
                        id="selectedDateRange"
                        style="font-weight: 600; color: #333"
                      ></div>
                    </div>
                    <div style="text-align: right">
                      <div
                        style="font-size: 0.9rem; color: #666"
                        data-translate="nightsCountLabel"
                      >
                        Poƒçet noc√≠:
                      </div>
                      <div
                        id="nightsCount"
                        style="font-weight: 600; color: #2563eb; font-size: 1.2rem"
                      >
                        0
                      </div>
                    </div>
                  </div>
                </div>

                <h3 data-translate="guestTypeAndCount">Typ hosta a poƒçet osob</h3>

                <!-- Guest Type -->
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 0.5rem;
                    margin-bottom: 1rem;
                  "
                >
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="singleRoomGuestType"
                      value="utia"
                      checked
                      style="margin-right: 0.5rem"
                    />
                    <span data-translate="employeeLabel">Zamƒõstnanec √öTIA</span>
                  </label>
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="singleRoomGuestType"
                      value="external"
                      style="margin-right: 0.5rem"
                    />
                    <span data-translate="externalLabel">Extern√≠ host</span>
                  </label>
                </div>

                <!-- Guest Count -->
                <div
                  class="guest-counters"
                  style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem"
                >
                  <div class="counter-item">
                    <label
                      class="counter-label"
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      data-translate="adultsLabel"
                      >Dospƒõl√≠</label
                    >
                    <div
                      class="counter-controls"
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        class="counter-btn"
                        onclick="window.app.adjustGuests('adults', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="singleRoomAdults"
                        class="counter-value"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >1</span
                      >
                      <button
                        class="counter-btn"
                        onclick="window.app.adjustGuests('adults', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                  <div class="counter-item">
                    <label
                      class="counter-label"
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      data-translate="childrenLabel"
                      >Dƒõti (3-17)</label
                    >
                    <div
                      class="counter-controls"
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        class="counter-btn"
                        onclick="window.app.adjustGuests('children', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="singleRoomChildren"
                        class="counter-value"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >0</span
                      >
                      <button
                        class="counter-btn"
                        onclick="window.app.adjustGuests('children', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                  <div class="counter-item">
                    <label
                      class="counter-label"
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      data-translate="toddlersCount"
                      >Batolata (0-3)</label
                    >
                    <div
                      class="counter-controls"
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        class="counter-btn"
                        onclick="window.app.adjustGuests('toddlers', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="singleRoomToddlers"
                        class="counter-value"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >0</span
                      >
                      <button
                        class="counter-btn"
                        onclick="window.app.adjustGuests('toddlers', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Capacity Warning -->
                <div
                  id="capacityWarning"
                  style="
                    margin-top: 0.5rem;
                    padding: 0.5rem;
                    background: #fff3cd;
                    border-left: 4px solid #ffc107;
                    border-radius: 4px;
                    display: none;
                  "
                >
                  <span
                    style="color: #856404; font-size: 0.9rem"
                    data-translate="capacityExceededRoom"
                    >‚ö†Ô∏è P≈ôekroƒçena kapacita pokoje</span
                  >
                </div>

                <!-- Price Summary -->
                <div
                  class="price-summary"
                  style="border-top: 2px solid #e2e8f0; padding-top: 1rem; margin-top: 1rem"
                >
                  <h4
                    style="margin-bottom: 0.75rem; color: #333"
                    data-translate="priceSummary"
                  >
                    Souhrn ceny
                  </h4>
                  <div
                    id="priceBreakdown"
                    style="
                      background: white;
                      padding: 1rem;
                      border-radius: 8px;
                      border: 1px solid #e2e8f0;
                    "
                  >
                    <div
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span data-translate="basePricePerRoom">Z√°kladn√≠ cena za pokoj:</span>
                      <span id="basePrice">0 Kƒç</span>
                    </div>
                    <div
                      id="guestCountsDisplay"
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                        color: #666;
                      "
                    >
                      <span data-translate="guestsCount">Poƒçet osob:</span>
                      <span id="guestCountsSummary">-</span>
                    </div>
                    <div
                      id="adultsPrice"
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span data-translate="adultsExtra">P≈ô√≠platek za dospƒõl√©:</span>
                      <span id="adultsSurcharge">0 Kƒç</span>
                    </div>
                    <div
                      id="childrenPrice"
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span data-translate="childrenExtra">P≈ô√≠platek za dƒõti:</span>
                      <span id="childrenSurcharge">0 Kƒç</span>
                    </div>
                    <div
                      id="toddlersInfo"
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                        color: #666;
                      "
                    >
                      <span data-translate="toddlersFree">Batolata (do 3 let):</span>
                      <span
                        id="toddlersSummary"
                        data-translate="toddlersFreeLabel"
                        >zdarma</span
                      >
                    </div>
                    <div
                      id="nightsPrice"
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span data-translate="nightsCount">Poƒçet noc√≠:</span>
                      <span>√ó <span id="nightsMultiplier">0</span></span>
                    </div>
                    <div
                      style="
                        border-top: 1px solid #dee2e6;
                        margin-top: 0.75rem;
                        padding-top: 0.75rem;
                        display: flex;
                        justify-content: space-between;
                        font-weight: bold;
                      "
                    >
                      <span data-translate="totalAmount">Celkem:</span>
                      <span
                        id="totalPrice"
                        style="color: #2e7d32"
                        >0 Kƒç</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Booking Actions -->
          <div class="booking-actions">
            <div style="display: flex; gap: 1rem; width: 100%">
              <button
                onclick="window.app.singleRoomBooking.hideRoomBookingModal()"
                class="btn btn-secondary"
                style="flex: 1"
                data-translate="cancelButton"
              >
                Zru≈°it
              </button>
              <button
                id="confirmSingleRoomBtn"
                onclick="window.app.singleRoomBooking.confirmRoomBooking()"
                class="btn btn-primary"
                style="flex: 2"
                disabled
                data-translate="addReservationButton"
              >
                P≈ôidat rezervaci
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Room Info Modal -->
      <div
        id="roomInfoModal"
        class="modal"
      >
        <div
          class="modal-content room-info-modal"
          style="max-width: 900px; max-height: 85vh; overflow-y: auto"
        >
          <button
            class="modal-close"
            onclick="document.getElementById('roomInfoModal').classList.remove('active')"
          >
            &times;
          </button>
          <h2 data-translate="roomInfoTitle">Informace o pokoj√≠ch</h2>

          <div style="margin-top: 2rem">
            <h3
              style="color: var(--primary-color); margin-bottom: 1.5rem"
              data-translate="roomCapacity"
            >
              Kapacita pokoj≈Ø
            </h3>
            <div
              id="roomCapacityGrid"
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 1rem;
                background: linear-gradient(135deg, var(--gray-50), var(--gray-100));
                padding: 1.5rem;
                border-radius: var(--radius-md);
                border: 1px solid var(--gray-200);
              "
            >
              <!-- Room capacity will be dynamically loaded here -->
            </div>
            <div
              style="margin-top: 1rem; text-align: center; font-weight: 600; color: var(--gray-700)"
            >
              <span
                id="totalCapacityText"
                data-translate="totalCapacity"
                >Celkov√° kapacita: 26 l≈Ø≈æek</span
              >
            </div>
          </div>

          <div style="margin-top: 2rem">
            <h3
              style="color: var(--primary-color); margin-bottom: 1.5rem"
              data-translate="priceList"
            >
              Cen√≠k
            </h3>
            <div id="priceListContent">
              <!-- Price list will be dynamically loaded here -->
            </div>
          </div>

          <!-- Bulk Booking Price List -->
          <div style="margin-top: 2rem">
            <h3
              style="color: #8b5cf6; margin-bottom: 1.5rem"
              data-translate="bulkPriceList"
            >
              Cen√≠k hromadn√© rezervace
            </h3>
            <div
              style="
                background: linear-gradient(135deg, #fdf2f8 0%, #f3e8ff 100%);
                padding: 1.5rem;
                border-radius: var(--radius-md);
                border: 2px solid #d8b4fe;
              "
            >
              <div id="bulkPriceListContent">
                <!-- Bulk price list will be dynamically loaded here -->
              </div>
              <div
                style="
                  margin-top: 1rem;
                  padding: 0.75rem;
                  background: rgba(34, 197, 94, 0.1);
                  border-radius: 6px;
                  border-left: 4px solid #22c55e;
                "
              >
                <p
                  style="font-size: 0.9rem; color: #15803d; margin: 0"
                  data-translate="bulkPriceNote"
                >
                  <strong>Pozn√°mka:</strong> Hromadn√° rezervace znamen√° pron√°jem cel√© chaty pro
                  jeden term√≠n. Dƒõti do 3 let jsou v≈ædy zdarma.
                </p>
              </div>
            </div>
          </div>

          <div
            style="
              margin-top: 2rem;
              padding: 1rem;
              background: var(--gray-50);
              border-radius: var(--radius-md);
            "
          >
            <h4
              style="color: var(--warning-color); margin-bottom: 0.5rem"
              data-translate="christmasTitle"
            >
              üéÑ V√°noƒçn√≠ obdob√≠
            </h4>
            <p
              style="font-size: 0.95rem; color: var(--gray-700)"
              data-translate="christmasInfo"
            >
              Rezervace bƒõhem v√°noƒçn√≠ch pr√°zdnin podl√©haj√≠ speci√°ln√≠m pravidl≈Øm. Zamƒõstnanci √öTIA
              mohou rezervovat max. 1-2 pokoje do 30.9. p≈ô√≠slu≈°n√©ho roku.
            </p>
          </div>
        </div>
      </div>

      <!-- Bulk Booking Modal - Using same interface as single room booking -->
      <div
        id="bulkBookingModal"
        class="modal"
      >
        <div class="modal-content compact-booking-modal">
          <button
            class="modal-close"
            onclick="closeBulkModal()"
          >
            &times;
          </button>

          <!-- Room Header -->
          <div class="booking-modal-header">
            <h2
              id="bulkBookingTitle"
              data-translate="bulkBookingModalTitle"
            >
              Hromadn√° rezervace cel√© chaty
            </h2>
            <div
              id="bulkBookingBadge"
              style="
                background: rgba(255, 255, 255, 0.2);
                padding: 0.5rem 1rem;
                border-radius: 6px;
                font-size: 1.1rem;
              "
            >
              <span data-translate="bulkBookingAllRooms">Rezervace v≈°ech 9 pokoj≈Ø (26 l≈Ø≈æek)</span>
            </div>
          </div>

          <div class="booking-modal-content">
            <!-- Left Column: Calendar -->
            <div class="booking-left-column">
              <h3 data-translate="bulkSelectStayPeriod">Vyberte term√≠n pobytu</h3>

              <!-- Mini Calendar Navigation -->
              <!-- Interactive Calendar -->
              <div
                id="bulkCalendar"
                class="interactive-calendar"
              >
                <!-- Calendar will be generated here -->
              </div>
            </div>

            <!-- Right Column: Guest Details & Booking Form -->
            <div
              class="booking-right-column"
              style="overflow-y: auto; max-height: 500px; padding-right: 10px"
            >
              <div
                class="booking-form-section"
                style="padding-bottom: 1rem"
              >
                <!-- Date Selection Summary -->
                <div
                  id="bulkDateSelectionSummary"
                  style="
                    margin-bottom: 1rem;
                    padding: 1rem;
                    background: #f0f9ff;
                    border-radius: 8px;
                    display: none;
                  "
                >
                  <div style="display: flex; justify-content: space-between; align-items: center">
                    <div>
                      <div
                        style="font-size: 0.9rem; color: #666"
                        data-translate="bulkSelectedPeriod"
                      >
                        Vybran√Ω term√≠n:
                      </div>
                      <div
                        id="bulkSelectedDateRange"
                        style="font-weight: 600; color: #333"
                      ></div>
                    </div>
                    <div style="text-align: right">
                      <div
                        style="font-size: 0.9rem; color: #666"
                        data-translate="bulkNightsCountLabel"
                      >
                        Poƒçet noc√≠:
                      </div>
                      <div
                        id="bulkNightsCount"
                        style="font-weight: 600; color: #2563eb; font-size: 1.2rem"
                      >
                        0
                      </div>
                    </div>
                  </div>
                </div>

                <h3 data-translate="guestTypeAndCount">Typ hosta a poƒçet osob</h3>

                <!-- Guest Type -->
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 0.5rem;
                    margin-bottom: 1rem;
                  "
                >
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="bulkGuestType"
                      value="utia"
                      checked
                      style="margin-right: 0.5rem"
                    />
                    <span data-translate="employeeLabel">Zamƒõstnanec √öTIA</span>
                  </label>
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="bulkGuestType"
                      value="external"
                      style="margin-right: 0.5rem"
                    />
                    <span data-translate="externalLabel">Extern√≠ host</span>
                  </label>
                </div>

                <!-- Guest Count -->
                <div
                  class="guest-counters"
                  style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem"
                >
                  <div class="counter-item">
                    <label
                      class="counter-label"
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      data-translate="adultsLabel"
                      >Dospƒõl√≠</label
                    >
                    <div
                      class="counter-controls"
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        class="counter-btn"
                        onclick="adjustBulkGuests('adults', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="bulkAdults"
                        class="counter-value"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >1</span
                      >
                      <button
                        class="counter-btn"
                        onclick="adjustBulkGuests('adults', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                  <div class="counter-item">
                    <label
                      class="counter-label"
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      data-translate="childrenLabel"
                      >Dƒõti (3-17)</label
                    >
                    <div
                      class="counter-controls"
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        class="counter-btn"
                        onclick="adjustBulkGuests('children', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="bulkChildren"
                        class="counter-value"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >0</span
                      >
                      <button
                        class="counter-btn"
                        onclick="adjustBulkGuests('children', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Capacity Warning - will be shown only when exceeded -->
                <div
                  id="bulkCapacityWarning"
                  style="
                    margin-top: 1rem;
                    padding: 0.75rem;
                    background: #fee2e2;
                    border-left: 4px solid #dc2626;
                    border-radius: 4px;
                    display: none;
                  "
                >
                  <span
                    style="color: #991b1b; font-size: 0.9rem"
                    data-translate="bulkCapacityExceededCottage"
                    >‚ö†Ô∏è P≈ôekroƒçena kapacita chaty (maximum 26 l≈Ø≈æek)</span
                  >
                </div>

                <!-- Price Calculation Section -->
                <div
                  class="price-summary"
                  style="padding-top: 1rem; margin-top: 1rem"
                >
                  <h4
                    style="margin-bottom: 0.75rem; color: #333"
                    data-translate="priceSummary"
                  >
                    Souhrn ceny
                  </h4>
                  <div
                    id="bulkPriceBreakdown"
                    style="
                      background: white;
                      padding: 1rem;
                      border-radius: 8px;
                      border: 1px solid #e2e8f0;
                    "
                  >
                    <!-- Per Night Section -->
                    <div
                      style="
                        margin-bottom: 0.75rem;
                        padding-bottom: 0.75rem;
                        border-bottom: 1px solid #e2e8f0;
                      "
                    >
                      <div
                        style="
                          font-size: 0.85rem;
                          color: #666;
                          margin-bottom: 0.5rem;
                          font-weight: 500;
                        "
                        data-translate="bulkPricePerNight"
                      >
                        Cena za jednu noc:
                      </div>
                      <div
                        class="price-line"
                        style="
                          display: flex;
                          justify-content: space-between;
                          margin-bottom: 0.25rem;
                          font-size: 0.9rem;
                          padding-left: 1rem;
                        "
                      >
                        <span data-translate="bulkPriceBasePriceCottage"
                          >Z√°kladn√≠ cena za chatu:</span
                        >
                        <span id="bulkBasePrice">0 Kƒç/noc</span>
                      </div>
                      <div
                        id="bulkAdultsPrice"
                        class="price-line"
                        style="
                          display: flex;
                          justify-content: space-between;
                          margin-bottom: 0.25rem;
                          font-size: 0.9rem;
                          padding-left: 1rem;
                        "
                      >
                        <span data-translate="bulkPriceAdultSurcharge">P≈ô√≠platek za dospƒõl√©:</span>
                        <span id="bulkAdultsSurcharge">0 Kƒç/noc</span>
                      </div>
                      <div
                        id="bulkChildrenPrice"
                        class="price-line"
                        style="
                          display: none;
                          justify-content: space-between;
                          margin-bottom: 0.25rem;
                          font-size: 0.9rem;
                          padding-left: 1rem;
                        "
                      >
                        <span data-translate="bulkPriceChildSurcharge">P≈ô√≠platek za dƒõti:</span>
                        <span id="bulkChildrenSurcharge">0 Kƒç/noc</span>
                      </div>
                      <div
                        id="bulkPricePerNight"
                        style="
                          display: flex;
                          justify-content: space-between;
                          margin-top: 0.5rem;
                          font-size: 0.95rem;
                          font-weight: 600;
                          color: #333;
                        "
                      >
                        <span data-translate="pricePerNightTotal">Cena za noc celkem:</span>
                        <span id="bulkPricePerNightAmount">0 Kƒç</span>
                      </div>
                    </div>

                    <!-- Number of Nights -->
                    <div
                      id="bulkNightsPrice"
                      class="price-line"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.75rem;
                        font-size: 0.95rem;
                        font-weight: 500;
                      "
                    >
                      <span data-translate="nightsCountLabel">Poƒçet noc√≠:</span>
                      <span id="bulkNightsMultiplier">√ó 0</span>
                    </div>

                    <!-- Total Price -->
                    <div
                      style="
                        border-top: 2px solid #dee2e6;
                        margin-top: 0.75rem;
                        padding-top: 0.75rem;
                        display: flex;
                        justify-content: space-between;
                        font-weight: bold;
                        font-size: 1.1rem;
                      "
                    >
                      <span data-translate="totalPrice">Celkov√° cena:</span>
                      <span
                        id="bulkTotalPrice"
                        style="color: #2e7d32"
                        >0 Kƒç</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Action buttons -->
          <div
            class="modal-footer"
            style="
              padding: 1.5rem;
              border-top: 1px solid #e2e8f0;
              display: flex;
              justify-content: flex-end;
              gap: 1rem;
            "
          >
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeBulkModal()"
              data-translate="cancelButton"
            >
              Zru≈°it
            </button>
            <button
              id="confirmBulkBookingBtn"
              class="btn btn-primary"
              onclick="addBulkBooking()"
              disabled
              data-translate="createReservationButton"
            >
              Vytvo≈ôit rezervaci
            </button>
          </div>
        </div>
      </div>

      <!-- Success Message -->
      <div
        id="successMessage"
        class="success-message"
      ></div>
    </div>

    <!-- Shared utilities (MUST load before data.js) -->
    <script src="js/shared/idGenerator.js"></script>
    <script src="js/shared/dateUtils.js"></script>
    <script src="js/shared/validationUtils.js"></script>
    <script src="js/shared/priceCalculator.js"></script>
    <script src="js/shared/christmasUtils.js"></script>
    <script src="js/shared/bookingLogic.js"></script>
    <script src="js/shared/bookingDisplayUtils.js"></script>
    <script src="js/calendar-utils.js"></script>
    <script src="js/shared/BaseCalendar.js"></script>

    <!-- Core modules (depend on shared utilities) -->
    <script src="data.js"></script>
    <script src="translations.js"></script>

    <!-- Modular JS files -->
    <script src="js/calendar.js"></script>
    <script src="js/single-room-booking.js"></script>
    <script src="js/bulk-booking.js"></script>
    <script src="js/booking-form.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/booking-app.js"></script>
  </body>
</html>
