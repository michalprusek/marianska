<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Rezervaƒçn√≠ syst√©m - Chata Mari√°nsk√°</title>
    <link
      rel="stylesheet"
      href="css/styles-unified.css"
    />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1 class="logo">Chata Mari√°nsk√°</h1>
          <nav class="nav">
            <!-- Language Switch -->
            <div class="language-switch">
              <span class="lang-label">CZ</span>
              <label class="switch">
                <input
                  type="checkbox"
                  id="languageSwitch"
                />
                <span class="slider"></span>
              </label>
              <span class="lang-label">EN</span>
            </div>

            <button
              id="roomInfoBtn"
              class="btn btn-secondary"
              data-cs="Informace o pokoj√≠ch"
              data-en="Room Information"
            >
              <span style="font-size: 1.2em; margin-right: 0.5rem">‚ÑπÔ∏è</span>
              <span class="btn-text">Informace o pokoj√≠ch</span>
            </button>
            <button
              id="bulkActionBtn"
              class="btn btn-primary"
              data-cs="Hromadn√° akce"
              data-en="Bulk Booking"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <rect
                  x="3"
                  y="4"
                  width="18"
                  height="18"
                  rx="2"
                  ry="2"
                />
                <line
                  x1="16"
                  y1="2"
                  x2="16"
                  y2="6"
                />
                <line
                  x1="8"
                  y1="2"
                  x2="8"
                  y2="6"
                />
                <line
                  x1="3"
                  y1="10"
                  x2="21"
                  y2="10"
                />
                <path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01" />
              </svg>
              <span class="btn-text">Hromadn√° akce</span>
            </button>
            <button
              id="adminBtn"
              class="btn btn-secondary"
            >
              Admin
            </button>
          </nav>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Calendar Section -->
        <section class="calendar-section">
          <div class="calendar-header">
            <button
              id="prevMonth"
              class="nav-btn"
              aria-label="P≈ôedchoz√≠ mƒõs√≠c"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path d="M15 18l-6-6 6-6" />
              </svg>
            </button>
            <h2
              id="currentMonth"
              class="month-title"
            ></h2>
            <button
              id="nextMonth"
              class="nav-btn"
              aria-label="Dal≈°√≠ mƒõs√≠c"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path d="M9 18l6-6-6-6" />
              </svg>
            </button>
          </div>
          <div
            id="calendar"
            class="calendar-grid"
          ></div>

          <!-- Legend Toggle Button -->
          <div class="legend-toggle-container">
            <button
              id="legendToggle"
              class="legend-toggle-btn"
              aria-expanded="false"
            >
              <span class="legend-toggle-icon">‚ùì</span>
              <span
                class="legend-toggle-text"
                data-translate="showLegend"
                >Zobrazit legendu</span
              >
              <span class="legend-toggle-arrow">‚ñº</span>
            </button>
          </div>

          <!-- Comprehensive Legend -->
          <div
            id="calendarLegend"
            class="calendar-legend legend-hidden"
          >
            <h3
              class="legend-title"
              data-translate="legendTitle"
            >
              Vysvƒõtlen√≠ barev a stav≈Ø v kalend√°≈ôi
            </h3>

            <!-- Room States Section -->
            <div class="legend-section">
              <h4
                class="legend-section-title"
                data-translate="legendRoomStates"
              >
                Stavy pokoj≈Ø
              </h4>
              <div class="legend-items">
                <div class="legend-item">
                  <div class="legend-indicator legend-available">12</div>
                  <div class="legend-text">
                    <span
                      class="legend-label"
                      data-translate="legendAvailable"
                      >Voln√Ω pokoj</span
                    >
                    <span
                      class="legend-description"
                      data-translate="legendAvailableDesc"
                      >Pokoj je k dispozici pro rezervaci</span
                    >
                  </div>
                </div>
                <div class="legend-item">
                  <div class="legend-indicator legend-booked">13</div>
                  <div class="legend-text">
                    <span
                      class="legend-label"
                      data-translate="legendBooked"
                      >Obsazen√Ω pokoj</span
                    >
                    <span
                      class="legend-description"
                      data-translate="legendBookedDesc"
                      >Pokoj je ji≈æ rezervov√°n (kliknƒõte pro detail)</span
                    >
                  </div>
                </div>
                <div class="legend-item">
                  <div class="legend-indicator legend-new-booking">14</div>
                  <div class="legend-text">
                    <span
                      class="legend-label"
                      data-translate="legendNewBooking"
                      >Novƒõ rezervovan√Ω pokoj</span
                    >
                    <span
                      class="legend-description"
                      data-translate="legendNewBookingDesc"
                      >Pokoj pr√°vƒõ rezervovan√Ω (oran≈æov√° barva)</span
                    >
                  </div>
                </div>
                <div class="legend-item">
                  <div class="legend-indicator legend-blocked">√ó</div>
                  <div class="legend-text">
                    <span
                      class="legend-label"
                      data-translate="legendBlocked"
                      >Blokovan√Ω pokoj</span
                    >
                    <span
                      class="legend-description"
                      data-translate="legendBlockedDesc"
                      >Pokoj je administrativnƒõ blokov√°n</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- Time Indicators Section -->
            <div class="legend-section">
              <h4
                class="legend-section-title"
                data-translate="legendTimeIndicators"
              >
                ƒåasov√© indik√°tory
              </h4>
              <div class="legend-items">
                <div class="legend-item">
                  <div class="legend-indicator legend-christmas">üéÑ</div>
                  <div class="legend-text">
                    <span
                      class="legend-label"
                      data-translate="legendChristmas"
                      >V√°noƒçn√≠ obdob√≠</span
                    >
                    <span
                      class="legend-description"
                      data-translate="legendChristmasDesc"
                      >Speci√°ln√≠ obdob√≠ s omezen√Ωm p≈ô√≠stupem</span
                    >
                  </div>
                </div>
                <div class="legend-item">
                  <div class="legend-indicator legend-past">22</div>
                  <div class="legend-text">
                    <span
                      class="legend-label"
                      data-translate="legendPastDates"
                      >Minul√© dny</span
                    >
                    <span
                      class="legend-description"
                      data-translate="legendPastDatesDesc"
                      >Dny v minulosti nejsou k dispozici</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- Usage Instructions Section -->
            <div class="legend-section">
              <h4
                class="legend-section-title"
                data-translate="legendClickInstructions"
              >
                Pokyny pro pou≈æit√≠
              </h4>
              <div class="legend-instructions">
                <div class="instruction-item">
                  <span class="instruction-icon">üñ±Ô∏è</span>
                  <span data-translate="legendClickAvailable"
                    >Kliknƒõte na zelen√Ω pokoj pro v√Ωbƒõr</span
                  >
                </div>
                <div class="instruction-item">
                  <span class="instruction-icon">‚ÑπÔ∏è</span>
                  <span data-translate="legendClickBooked"
                    >Kliknƒõte na oran≈æov√Ω pokoj pro zobrazen√≠ detailu rezervace</span
                  >
                </div>
                <div class="instruction-item">
                  <span class="instruction-icon">üö´</span>
                  <span data-translate="legendClickBlocked"
                    >Kliknƒõte na ≈°ed√Ω pokoj pro zobrazen√≠ d≈Øvodu blokace</span
                  >
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Booking Form Section -->
        <section class="booking-section">
          <div class="booking-card">
            <h2 data-translate="newBooking">Nov√° rezervace</h2>

            <!-- Selected Dates Display -->
            <div
              id="selectedDates"
              class="selected-dates"
            ></div>

            <!-- Room Selection -->
            <div
              id="roomSelection"
              class="room-selection"
            ></div>

            <!-- New Reservations List - moved here -->
            <div
              id="newReservationsList"
              class="new-reservations-list"
              style="margin-top: 1.5rem"
            >
              <!-- New reservations will be added here -->
            </div>

            <!-- Price Calculator -->
            <div class="price-calculator">
              <h3 data-translate="priceCalculation">Kalkulace ceny</h3>

              <!-- Capacity display removed per user request -->

              <!-- Room Guest Controls - Individual room cards -->
              <div
                id="roomGuestControls"
                style="margin: 1rem 0"
              >
                <!-- Room guest control cards will be added here dynamically -->
              </div>

              <!-- Total price moved below room cards -->
              <div
                class="total-price"
                style="
                  margin-top: 2rem;
                  padding: 1.5rem;
                  background: linear-gradient(135deg, var(--primary-50), var(--primary-100));
                  border-radius: var(--radius-lg);
                  border: 2px solid var(--primary-200);
                "
              >
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    width: 100%;
                  "
                >
                  <span
                    style="font-size: 1.1rem; font-weight: 600; color: var(--gray-700)"
                    data-translate="totalPrice"
                    >Celkov√° cena:</span
                  >
                  <span
                    id="totalPrice"
                    class="price-amount"
                    style="
                      font-size: 1.5rem;
                      font-weight: 700;
                      color: var(--primary-600);
                      margin-left: auto;
                      text-align: right;
                    "
                    >0 Kƒç</span
                  >
                </div>
              </div>
            </div>

            <!-- Create Booking Button -->
            <div style="margin-top: 2rem; text-align: center">
              <button
                id="createBookingBtn"
                class="btn btn-primary"
                style="padding: 1rem 2rem; font-size: 1.1rem"
              >
                <span data-translate="createBooking">Vytvo≈ôit rezervaci</span>
              </button>
            </div>

            <!-- Finalize Reservations Button - show only when there are reservations -->
            <div
              id="finalizeReservationsDiv"
              style="margin-top: 1.5rem; text-align: center; display: none"
            >
              <button
                id="finalizeReservationsBtn"
                class="btn btn-primary"
                onclick="finalizeAllReservations()"
              >
                <span data-translate="finalizeReservations">Dokonƒçit v≈°echny rezervace</span>
              </button>
            </div>
          </div>
        </section>
      </main>

      <!-- Booking Details Modal -->
      <div
        id="bookingModal"
        class="modal"
      >
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <h2>Detail rezervace</h2>
          <div id="bookingDetails"></div>
          <div class="modal-actions">
            <button
              id="contactOwner"
              class="btn btn-primary"
            >
              Kontaktovat vlastn√≠ka
            </button>
          </div>
        </div>
      </div>

      <!-- Contact Form Modal -->
      <div
        id="contactModal"
        class="modal"
      >
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <h2 data-translate="contactOwnerTitle">Kontaktovat vlastn√≠ka rezervace</h2>
          <div
            style="
              background: var(--gray-50);
              padding: 1rem;
              border-radius: var(--radius-md);
              margin-bottom: 1.5rem;
            "
          >
            <p
              style="font-size: 0.9rem; color: var(--gray-600); margin: 0"
              data-translate="contactOwnerInfo"
            >
              Va≈°e zpr√°va bude odesl√°na vlastn√≠kovi rezervace. Email vlastn√≠ka z≈Øst√°v√° skryt√Ω.
            </p>
          </div>
          <form id="contactForm">
            <div class="input-group">
              <label
                for="contactEmail"
                data-translate="yourEmail"
                >V√°≈° email *</label
              >
              <input
                type="email"
                id="contactEmail"
                required
              />
            </div>
            <div class="input-group">
              <label
                for="contactMessage"
                data-translate="message"
                >Zpr√°va *</label
              >
              <textarea
                id="contactMessage"
                rows="5"
                required
                placeholder="Napi≈°te svou zpr√°vu..."
              ></textarea>
            </div>
            <button
              type="submit"
              class="btn-primary"
              data-translate="sendMessage"
            >
              Odeslat zpr√°vu
            </button>
          </form>
        </div>
      </div>

      <!-- Booking Form Modal -->
      <div
        id="bookingFormModal"
        class="modal"
      >
        <div class="modal-content">
          <button class="modal-close">&times;</button>
          <h2 data-translate="completeBooking">Dokonƒçen√≠ rezervace</h2>

          <!-- Booking Summary -->
          <div
            style="
              background: var(--gray-50);
              padding: 1rem;
              border-radius: var(--radius-md);
              margin-bottom: 2rem;
            "
          >
            <h3
              style="font-size: 1rem; margin-bottom: 1rem"
              data-translate="bookingSummary"
            >
              Souhrn rezervace
            </h3>
            <div
              id="bookingSummary"
              style="display: grid; gap: 0.5rem"
            >
              <!-- Summary will be populated here -->
            </div>
          </div>

          <!-- Booking Form -->
          <form id="bookingForm">
            <h3
              style="font-size: 1.1rem; margin-bottom: 1rem"
              data-translate="billingDetails"
            >
              Fakturaƒçn√≠ √∫daje
            </h3>

            <div class="form-grid">
              <div class="input-group">
                <label for="name">Jm√©no a p≈ô√≠jmen√≠ *</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  minlength="3"
                  placeholder="nap≈ô. Jan Nov√°k"
                  title="Zadejte cel√© jm√©no (min. 3 znaky)"
                />
              </div>

              <div class="input-group">
                <label for="email">Email *</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  placeholder="vas@email.cz"
                  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                  title="Zadejte platnou emailovou adresu"
                />
              </div>

              <div class="input-group">
                <label for="phone">Telefon *</label>
                <div style="display: flex; gap: 0.5rem">
                  <select
                    id="phonePrefix"
                    name="phonePrefix"
                    style="
                      width: 80px;
                      padding: 0.75rem;
                      border: 1px solid var(--gray-300);
                      border-radius: var(--radius-sm);
                      font-size: 0.9rem;
                    "
                  >
                    <option value="+420">+420</option>
                    <option value="+421">+421</option>
                    <option value="+1">+1</option>
                    <option value="+44">+44</option>
                    <option value="+49">+49</option>
                    <option value="+33">+33</option>
                    <option value="+43">+43</option>
                    <option value="+48">+48</option>
                    <option value="+386">+386</option>
                  </select>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    required
                    placeholder="123456789"
                    pattern="[0-9\s]{7,15}"
                    title="Zadejte telefonn√≠ ƒç√≠slo (pouze ƒç√≠slice)"
                    style="width: calc(100% - 85px)"
                  />
                </div>
              </div>

              <div class="input-group">
                <label for="company">Firma</label>
                <input
                  type="text"
                  id="company"
                  name="company"
                  placeholder="N√°zev firmy (nepovinn√©)"
                />
              </div>

              <div class="input-group full-width">
                <label for="address">Adresa *</label>
                <input
                  type="text"
                  id="address"
                  name="address"
                  required
                  minlength="5"
                  placeholder="nap≈ô. Hlavn√≠ 123"
                  title="Zadejte ulici a ƒç√≠slo popisn√©"
                />
              </div>

              <div class="input-group">
                <label for="city">Mƒõsto *</label>
                <input
                  type="text"
                  id="city"
                  name="city"
                  required
                  minlength="2"
                  placeholder="nap≈ô. Praha"
                  title="Zadejte n√°zev mƒõsta"
                />
              </div>

              <div class="input-group">
                <label for="zip">PSƒå *</label>
                <input
                  type="text"
                  id="zip"
                  name="zip"
                  required
                  pattern="[0-9]{5}"
                  placeholder="12345"
                  maxlength="5"
                  title="PSƒå mus√≠ obsahovat p≈ôesnƒõ 5 ƒç√≠slic"
                />
              </div>

              <div class="input-group">
                <label for="ico">IƒåO</label>
                <input
                  type="text"
                  id="ico"
                  name="ico"
                  pattern="[0-9]{8}"
                  placeholder="12345678"
                  maxlength="8"
                  title="IƒåO mus√≠ obsahovat 8 ƒç√≠slic"
                />
              </div>

              <div class="input-group">
                <label for="dic">DIƒå</label>
                <input
                  type="text"
                  id="dic"
                  name="dic"
                  pattern="(CZ)?[0-9]{8,10}"
                  placeholder="CZ12345678"
                  title="DIƒå ve form√°tu CZ12345678"
                />
              </div>
            </div>

            <div class="input-group full-width">
              <label for="notes">Pozn√°mky</label>
              <textarea
                id="notes"
                name="notes"
                rows="3"
              ></textarea>
            </div>

            <div
              class="modal-actions"
              style="margin-top: 2rem"
            >
              <button
                type="button"
                class="btn btn-secondary"
                onclick="document.getElementById('bookingFormModal').classList.remove('active')"
                data-translate="cancel"
              >
                Zru≈°it
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                data-translate="confirmBooking"
              >
                Potvrdit rezervaci
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Single Room Booking Modal -->
      <div
        id="singleRoomBookingModal"
        class="modal"
      >
        <div class="modal-content compact-booking-modal">
          <button
            class="modal-close"
            onclick="window.app.singleRoomBooking.hideRoomBookingModal()"
          >
            &times;
          </button>

          <!-- Room Header -->
          <div class="booking-modal-header">
            <h2 id="roomBookingTitle">Rezervace pokoje</h2>
            <div id="roomBookingBadge"></div>
          </div>

          <div class="booking-modal-content">
            <!-- Left Column: Calendar -->
            <div class="booking-left-column">
              <h3>Vyberte term√≠n pobytu</h3>

              <!-- Mini Calendar Navigation -->
              <div
                class="calendar-navigation"
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 1rem;
                "
              >
                <button
                  id="prevMiniMonth"
                  class="nav-btn"
                  style="
                    padding: 0.5rem;
                    background: white;
                    border: 1px solid #e2e8f0;
                    border-radius: 4px;
                    cursor: pointer;
                  "
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                  >
                    <path
                      d="M12.5 15L7.5 10L12.5 5"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
                <h4
                  id="miniCalendarMonth"
                  style="margin: 0; font-weight: 600"
                >
                  Month Year
                </h4>
                <button
                  id="nextMiniMonth"
                  class="nav-btn"
                  style="
                    padding: 0.5rem;
                    background: white;
                    border: 1px solid #e2e8f0;
                    border-radius: 4px;
                    cursor: pointer;
                  "
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                  >
                    <path
                      d="M7.5 15L12.5 10L7.5 5"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
              </div>

              <!-- Interactive Calendar -->
              <div
                id="miniCalendar"
                class="interactive-calendar"
              >
                <!-- Calendar will be generated here -->
              </div>
            </div>

            <!-- Right Column: Guest Details & Booking Form -->
            <div class="booking-right-column">
              <div class="booking-form-section">
                <!-- Date Selection Summary - moved here -->
                <div
                  id="dateSelectionSummary"
                  style="
                    margin-bottom: 1rem;
                    padding: 1rem;
                    background: #f0f9ff;
                    border-radius: 8px;
                    display: none;
                  "
                >
                  <div style="display: flex; justify-content: space-between; align-items: center">
                    <div>
                      <div style="font-size: 0.9rem; color: #666">Vybran√Ω term√≠n:</div>
                      <div
                        id="selectedDateRange"
                        style="font-weight: 600; color: #333"
                      ></div>
                    </div>
                    <div style="text-align: right">
                      <div style="font-size: 0.9rem; color: #666">Poƒçet noc√≠:</div>
                      <div
                        id="nightsCount"
                        style="font-weight: 600; color: #2563eb; font-size: 1.2rem"
                      >
                        0
                      </div>
                    </div>
                  </div>
                </div>

                <h3>Typ hosta a poƒçet osob</h3>

                <!-- Guest Type -->
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 0.5rem;
                    margin-bottom: 1rem;
                  "
                >
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="singleRoomGuestType"
                      value="utia"
                      checked
                      style="margin-right: 0.5rem"
                    />
                    <span>Zamƒõstnanec √öTIA</span>
                  </label>
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="singleRoomGuestType"
                      value="external"
                      style="margin-right: 0.5rem"
                    />
                    <span>Extern√≠ host</span>
                  </label>
                </div>

                <!-- Guest Count -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem">
                  <div>
                    <label
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      >Dospƒõl√≠</label
                    >
                    <div
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        onclick="window.app.adjustGuests('adults', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="singleRoomAdults"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >1</span
                      >
                      <button
                        onclick="window.app.adjustGuests('adults', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                  <div>
                    <label
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      >Dƒõti (3-12)</label
                    >
                    <div
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        onclick="window.app.adjustGuests('children', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="singleRoomChildren"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >0</span
                      >
                      <button
                        onclick="window.app.adjustGuests('children', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                  <div>
                    <label
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      >Batolata (0-3)</label
                    >
                    <div
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        onclick="window.app.adjustGuests('toddlers', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="singleRoomToddlers"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >0</span
                      >
                      <button
                        onclick="window.app.adjustGuests('toddlers', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Capacity Warning -->
                <div
                  id="capacityWarning"
                  style="
                    margin-top: 0.5rem;
                    padding: 0.5rem;
                    background: #fff3cd;
                    border-left: 4px solid #ffc107;
                    border-radius: 4px;
                    display: none;
                  "
                >
                  <span style="color: #856404; font-size: 0.9rem"
                    >‚ö†Ô∏è P≈ôekroƒçena kapacita pokoje</span
                  >
                </div>

                <!-- Price Summary -->
                <div style="border-top: 2px solid #e2e8f0; padding-top: 1rem; margin-top: 1rem">
                  <h4 style="margin-bottom: 0.75rem; color: #333">Souhrn ceny</h4>
                  <div
                    id="priceBreakdown"
                    style="
                      background: white;
                      padding: 1rem;
                      border-radius: 8px;
                      border: 1px solid #e2e8f0;
                    "
                  >
                    <div
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span>Z√°kladn√≠ cena za pokoj:</span>
                      <span id="basePrice">0 Kƒç</span>
                    </div>
                    <div
                      id="guestCountsDisplay"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                        color: #666;
                      "
                    >
                      <span>Poƒçet osob:</span>
                      <span id="guestCountsSummary">-</span>
                    </div>
                    <div
                      id="adultsPrice"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span>P≈ô√≠platek za dospƒõl√©:</span>
                      <span id="adultsSurcharge">0 Kƒç</span>
                    </div>
                    <div
                      id="childrenPrice"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span>P≈ô√≠platek za dƒõti:</span>
                      <span id="childrenSurcharge">0 Kƒç</span>
                    </div>
                    <div
                      id="toddlersInfo"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                        color: #666;
                      "
                    >
                      <span>Batolata (do 3 let):</span>
                      <span id="toddlersSummary">zdarma</span>
                    </div>
                    <div
                      id="nightsPrice"
                      style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                        font-size: 0.9rem;
                      "
                    >
                      <span>Poƒçet noc√≠:</span>
                      <span>√ó <span id="nightsMultiplier">0</span></span>
                    </div>
                    <div
                      style="
                        border-top: 1px solid #dee2e6;
                        margin-top: 0.75rem;
                        padding-top: 0.75rem;
                        display: flex;
                        justify-content: space-between;
                        font-weight: bold;
                      "
                    >
                      <span>Celkem:</span>
                      <span
                        id="totalPrice"
                        style="color: #2e7d32"
                        >0 Kƒç</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Booking Actions -->
          <div class="booking-actions">
            <div style="display: flex; gap: 1rem; width: 100%">
              <button
                onclick="window.app.singleRoomBooking.hideRoomBookingModal()"
                class="btn btn-secondary"
                style="flex: 1"
              >
                Zru≈°it
              </button>
              <button
                id="confirmSingleRoomBtn"
                onclick="window.app.bookingForm.submitBooking()"
                class="btn btn-primary"
                style="flex: 2"
                disabled
              >
                P≈ôidat rezervaci
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Room Info Modal -->
      <div
        id="roomInfoModal"
        class="modal"
      >
        <div
          class="modal-content room-info-modal"
          style="max-width: 900px; max-height: 85vh; overflow-y: auto"
        >
          <button
            class="modal-close"
            onclick="document.getElementById('roomInfoModal').classList.remove('active')"
          >
            &times;
          </button>
          <h2 data-translate="roomInfoTitle">Informace o pokoj√≠ch</h2>

          <div style="margin-top: 2rem">
            <h3
              style="color: var(--primary-color); margin-bottom: 1.5rem"
              data-translate="roomCapacity"
            >
              Kapacita pokoj≈Ø
            </h3>
            <div
              id="roomCapacityGrid"
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 1rem;
                background: linear-gradient(135deg, var(--gray-50), var(--gray-100));
                padding: 1.5rem;
                border-radius: var(--radius-md);
                border: 1px solid var(--gray-200);
              "
            >
              <!-- Room capacity will be dynamically loaded here -->
            </div>
            <div
              style="margin-top: 1rem; text-align: center; font-weight: 600; color: var(--gray-700)"
            >
              <span
                id="totalCapacityText"
                data-translate="totalCapacity"
                >Celkov√° kapacita: 26 l≈Ø≈æek</span
              >
            </div>
          </div>

          <div style="margin-top: 2rem">
            <h3
              style="color: var(--primary-color); margin-bottom: 1.5rem"
              data-translate="priceList"
            >
              Cen√≠k
            </h3>
            <div id="priceListContent">
              <!-- Price list will be dynamically loaded here -->
            </div>
          </div>

          <!-- Bulk Booking Price List -->
          <div style="margin-top: 2rem">
            <h3
              style="color: #8b5cf6; margin-bottom: 1.5rem"
              data-translate="bulkPriceList"
            >
              Cen√≠k hromadn√© rezervace
            </h3>
            <div
              style="
                background: linear-gradient(135deg, #fdf2f8 0%, #f3e8ff 100%);
                padding: 1.5rem;
                border-radius: var(--radius-md);
                border: 2px solid #d8b4fe;
              "
            >
              <div id="bulkPriceListContent">
                <!-- Bulk price list will be dynamically loaded here -->
              </div>
              <div
                style="
                  margin-top: 1rem;
                  padding: 0.75rem;
                  background: rgba(34, 197, 94, 0.1);
                  border-radius: 6px;
                  border-left: 4px solid #22c55e;
                "
              >
                <p
                  style="font-size: 0.9rem; color: #15803d; margin: 0"
                  data-translate="bulkPriceNote"
                >
                  <strong>Pozn√°mka:</strong> Hromadn√° rezervace znamen√° pron√°jem cel√© chaty pro
                  jeden term√≠n. Dƒõti do 3 let jsou v≈ædy zdarma.
                </p>
              </div>
            </div>
          </div>

          <div
            style="
              margin-top: 2rem;
              padding: 1rem;
              background: var(--gray-50);
              border-radius: var(--radius-md);
            "
          >
            <h4
              style="color: var(--warning-color); margin-bottom: 0.5rem"
              data-translate="christmasTitle"
            >
              üéÑ V√°noƒçn√≠ obdob√≠
            </h4>
            <p
              style="font-size: 0.95rem; color: var(--gray-700)"
              data-translate="christmasInfo"
            >
              Rezervace bƒõhem v√°noƒçn√≠ch pr√°zdnin podl√©haj√≠ speci√°ln√≠m pravidl≈Øm. Zamƒõstnanci √öTIA
              mohou rezervovat max. 1-2 pokoje do 30.9. p≈ô√≠slu≈°n√©ho roku.
            </p>
          </div>
        </div>
      </div>

      <!-- Bulk Booking Modal - Using same interface as single room booking -->
      <div
        id="bulkBookingModal"
        class="modal"
      >
        <div class="modal-content compact-booking-modal">
          <button
            class="modal-close"
            onclick="closeBulkModal()"
          >
            &times;
          </button>

          <!-- Room Header -->
          <div class="booking-modal-header">
            <h2 id="bulkBookingTitle">Hromadn√° rezervace cel√© chaty</h2>
            <div
              id="bulkBookingBadge"
              style="
                background: rgba(255, 255, 255, 0.2);
                padding: 0.5rem 1rem;
                border-radius: 6px;
                font-size: 1.1rem;
              "
            >
              <span>Rezervace v≈°ech 9 pokoj≈Ø (26 l≈Ø≈æek)</span>
            </div>
          </div>

          <div class="booking-modal-content">
            <!-- Left Column: Calendar -->
            <div class="booking-left-column">
              <h3>Vyberte term√≠n pobytu</h3>

              <!-- Interactive Calendar -->
              <div
                id="bulkMiniCalendar"
                class="interactive-calendar"
              >
                <!-- Calendar will be generated here -->
              </div>
            </div>

            <!-- Right Column: Guest Details & Booking Form -->
            <div class="booking-right-column">
              <div class="booking-form-section">
                <!-- Date Selection Summary -->
                <div
                  id="bulkDateSelectionSummary"
                  style="
                    margin-bottom: 1rem;
                    padding: 1rem;
                    background: #f0f9ff;
                    border-radius: 8px;
                    display: none;
                  "
                >
                  <div style="display: flex; justify-content: space-between; align-items: center">
                    <div>
                      <div style="font-size: 0.9rem; color: #666">Vybran√Ω term√≠n:</div>
                      <div
                        id="bulkSelectedDateRange"
                        style="font-weight: 600; color: #333"
                      ></div>
                    </div>
                    <div style="text-align: right">
                      <div style="font-size: 0.9rem; color: #666">Poƒçet noc√≠:</div>
                      <div
                        id="bulkNightsCount"
                        style="font-weight: 600; color: #2563eb; font-size: 1.2rem"
                      >
                        0
                      </div>
                    </div>
                  </div>
                </div>

                <h3>Typ hosta a poƒçet osob</h3>

                <!-- Guest Type -->
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 0.5rem;
                    margin-bottom: 1rem;
                  "
                >
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="bulkGuestType"
                      value="utia"
                      checked
                      style="margin-right: 0.5rem"
                    />
                    <span>Zamƒõstnanec √öTIA</span>
                  </label>
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      padding: 0.75rem;
                      background: white;
                      border: 2px solid #e2e8f0;
                      border-radius: 8px;
                      cursor: pointer;
                    "
                  >
                    <input
                      type="radio"
                      name="bulkGuestType"
                      value="external"
                      style="margin-right: 0.5rem"
                    />
                    <span>Extern√≠ host</span>
                  </label>
                </div>

                <!-- Guest Count -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem">
                  <div>
                    <label
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      >Dospƒõl√≠</label
                    >
                    <div
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        onclick="adjustBulkGuests('adults', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="bulkAdults"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >10</span
                      >
                      <button
                        onclick="adjustBulkGuests('adults', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                  <div>
                    <label
                      style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem; color: #666"
                      >Dƒõti (3-12)</label
                    >
                    <div
                      style="
                        display: flex;
                        align-items: center;
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 6px;
                      "
                    >
                      <button
                        onclick="adjustBulkGuests('children', -1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        -
                      </button>
                      <span
                        id="bulkChildren"
                        style="flex: 1; text-align: center; font-weight: 600"
                        >0</span
                      >
                      <button
                        onclick="adjustBulkGuests('children', 1)"
                        style="
                          padding: 0.5rem 0.75rem;
                          border: none;
                          background: transparent;
                          cursor: pointer;
                          font-size: 1.2rem;
                        "
                      >
                        +
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Capacity Warning - will be shown only when exceeded -->
                <div
                  id="bulkCapacityWarning"
                  style="
                    margin-top: 1rem;
                    padding: 0.75rem;
                    background: #fee2e2;
                    border-left: 4px solid #dc2626;
                    border-radius: 4px;
                    display: none;
                  "
                >
                  <span style="color: #991b1b; font-size: 0.9rem"
                    >‚ö†Ô∏è P≈ôekroƒçena kapacita chaty (maximum 26 l≈Ø≈æek)</span
                  >
                </div>
              </div>

              <!-- Price Calculation Section -->
              <div style="border-top: 2px solid #e2e8f0; padding-top: 1rem; margin-top: 1rem">
                <h4 style="margin-bottom: 0.75rem; color: #333">Souhrn ceny</h4>
                <div
                  id="bulkPriceBreakdown"
                  style="
                    background: white;
                    padding: 1rem;
                    border-radius: 8px;
                    border: 1px solid #e2e8f0;
                  "
                >
                  <div
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 0.5rem;
                      font-size: 0.9rem;
                    "
                  >
                    <span>Z√°kladn√≠ cena za chatu:</span>
                    <span id="bulkBasePrice">0 Kƒç</span>
                  </div>
                  <div
                    id="bulkNightsPrice"
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 0.5rem;
                      font-size: 0.9rem;
                    "
                  >
                    <span>Poƒçet noc√≠:</span>
                    <span id="bulkNightsMultiplier">√ó 0</span>
                  </div>
                  <div
                    id="bulkAdultsPrice"
                    style="
                      display: flex;
                      justify-content: space-between;
                      margin-bottom: 0.5rem;
                      font-size: 0.9rem;
                    "
                  >
                    <span>P≈ô√≠platek za dospƒõl√©:</span>
                    <span id="bulkAdultsSurcharge">0 Kƒç</span>
                  </div>
                  <div
                    id="bulkChildrenPrice"
                    style="
                      display: none;
                      justify-content: space-between;
                      margin-bottom: 0.5rem;
                      font-size: 0.9rem;
                    "
                  >
                    <span>P≈ô√≠platek za dƒõti:</span>
                    <span id="bulkChildrenSurcharge">0 Kƒç</span>
                  </div>
                  <div
                    style="
                      border-top: 1px solid #dee2e6;
                      margin-top: 0.75rem;
                      padding-top: 0.75rem;
                      display: flex;
                      justify-content: space-between;
                      font-weight: bold;
                    "
                  >
                    <span>Celkem:</span>
                    <span
                      id="bulkTotalPrice"
                      style="color: #2e7d32"
                      >0 Kƒç</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Action buttons -->
          <div
            class="modal-footer"
            style="
              padding: 1.5rem;
              border-top: 1px solid #e2e8f0;
              display: flex;
              justify-content: flex-end;
              gap: 1rem;
            "
          >
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeBulkModal()"
            >
              Zru≈°it
            </button>
            <button
              id="confirmBulkBookingBtn"
              class="btn btn-primary"
              onclick="addBulkBooking()"
              disabled
            >
              P≈ôidat rezervaci
            </button>
          </div>
        </div>
      </div>

      <!-- Success Message -->
      <div
        id="successMessage"
        class="success-message"
      ></div>
    </div>

    <!-- Core modules -->
    <script src="data.js"></script>
    <script src="translations.js"></script>

    <!-- Shared calendar utilities -->
    <script src="js/calendar-utils.js"></script>

    <!-- Modular JS files -->
    <script src="js/calendar.js"></script>
    <script src="js/single-room-booking.js"></script>
    <script src="js/bulk-booking.js"></script>
    <script src="js/booking-form.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/booking-app.js"></script>
  </body>
</html>
