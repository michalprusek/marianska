/**
 * Manual Testing Guide - Browser Console Script
 *
 * Copy this script into browser console to perform manual tests
 * Run on: http://chata.utia.cas.cz
 */

console.log('=== MariÃ¡nskÃ¡ Chata - Manual Testing Guide ===\n');
console.log('This script will help you perform manual testing step-by-step\n');

// Test 1: Verify Admin Panel Labels
console.log('ğŸ“‹ TEST 1: Admin Panel Labels Verification');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Steps:');
console.log('1. Open http://chata.utia.cas.cz/admin.html');
console.log('2. Login with admin credentials');
console.log('3. Navigate to "NastavenÃ­ systÃ©mu" tab');
console.log('4. Scroll to "Ceny pro jednotlivÃ© rezervace" section');
console.log('');
console.log('Expected Results:');
console.log('âœ… All base price labels should show: "PrÃ¡zdnÃ½ pokoj:"');
console.log('âœ… Labels should appear for:');
console.log('   - ÃšTIA - MalÃ½ pokoj (small room)');
console.log('   - ÃšTIA - VelkÃ½ pokoj (large room)');
console.log('   - ExternÃ­ - MalÃ½ pokoj (small room)');
console.log('   - ExternÃ­ - VelkÃ½ pokoj (large room)');
console.log('');
console.log('âŒ Old labels should NOT appear: "PÅ™i obsazenÃ­ 1 dospÄ›lou osobou:"');
console.log('\nPress Enter when verified...\n');

// Test 2: Admin Panel - Save Prices
console.log('\nğŸ“‹ TEST 2: Admin Panel - Save Empty Room Prices');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Data to Enter:');
console.log('');
console.log('ÃšTIA:');
console.log('  Small room (empty): 250 KÄ');
console.log('  Small room (adult): 50 KÄ');
console.log('  Small room (child): 25 KÄ');
console.log('  Large room (empty): 350 KÄ');
console.log('  Large room (adult): 70 KÄ');
console.log('  Large room (child): 35 KÄ');
console.log('');
console.log('External:');
console.log('  Small room (empty): 400 KÄ');
console.log('  Small room (adult): 100 KÄ');
console.log('  Small room (child): 50 KÄ');
console.log('  Large room (empty): 500 KÄ');
console.log('  Large room (adult): 120 KÄ');
console.log('  Large room (child): 60 KÄ');
console.log('');
console.log('Steps:');
console.log('1. Enter all prices as shown above');
console.log('2. Click "UloÅ¾it nastavenÃ­" (Save settings)');
console.log('3. Wait for success notification');
console.log('4. Refresh page (F5)');
console.log('5. Verify all prices are still displayed correctly');
console.log('');
console.log('Expected Results:');
console.log('âœ… Success notification: "NastavenÃ­ bylo ÃºspÄ›Å¡nÄ› uloÅ¾eno"');
console.log('âœ… After refresh, all prices match entered values');
console.log('âœ… Database contains prices with "empty" key (not "base")');
console.log('\nPress Enter when verified...\n');

// Test 3: Frontend - Per-Room Guest Type Dropdown
console.log('\nğŸ“‹ TEST 3: Per-Room Guest Type Dropdown');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Steps:');
console.log('1. Open http://chata.utia.cas.cz');
console.log('2. Click on any room (e.g., P12)');
console.log('3. Select dates (e.g., 2025-12-10 to 2025-12-12)');
console.log('4. Look for dropdown labeled "Typ hostÅ¯ pro tento pokoj:"');
console.log('');
console.log('Expected Results:');
console.log('âœ… Dropdown is visible and contains 2 options:');
console.log('   - "ZamÄ›stnanec ÃšTIA" (ÃšTIA employee)');
console.log('   - "ExternÃ­ host" (External guest)');
console.log('âœ… Default selection is "ZamÄ›stnanec ÃšTIA"');
console.log('âœ… Dropdown is above guest count selectors');
console.log('âœ… Helper text appears: "ğŸ’¡ Cena ÃšTIA se pouÅ¾ije, pokud je na pokoji alespoÅˆ 1 zamÄ›stnanec ÃšTIA"');
console.log('\nPress Enter when verified...\n');

// Test 4: Price Calculation - ÃšTIA Employee
console.log('\nğŸ“‹ TEST 4: New Booking - ÃšTIA Employee Pricing');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Scenario:');
console.log('- Room: P12 (small room)');
console.log('- Dates: 2025-12-10 to 2025-12-12 (2 nights)');
console.log('- Guest type: ZamÄ›stnanec ÃšTIA');
console.log('- Guests: 2 adults, 1 child, 0 toddlers');
console.log('');
console.log('Expected Calculation:');
console.log('Empty room: 250 KÄ Ã— 2 nights = 500 KÄ');
console.log('Adults: 2 Ã— 50 KÄ Ã— 2 nights = 200 KÄ');
console.log('Children: 1 Ã— 25 KÄ Ã— 2 nights = 50 KÄ');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('TOTAL: 750 KÄ');
console.log('');
console.log('Steps:');
console.log('1. Open http://chata.utia.cas.cz');
console.log('2. Click on P12 (small room)');
console.log('3. Select dates: 2025-12-10 to 2025-12-12');
console.log('4. Select "ZamÄ›stnanec ÃšTIA" in dropdown');
console.log('5. Set guests: 2 adults, 1 child');
console.log('6. Check price preview');
console.log('');
console.log('Expected Results:');
console.log('âœ… Price preview shows: 750 KÄ');
console.log('âœ… Price updates immediately when changing guest type');
console.log('âœ… Price updates when changing guest counts');
console.log('\nPress Enter when verified...\n');

// Test 5: Price Calculation - External Guest
console.log('\nğŸ“‹ TEST 5: New Booking - External Guest Pricing');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Scenario:');
console.log('- Room: P12 (small room)');
console.log('- Dates: 2025-12-10 to 2025-12-12 (2 nights)');
console.log('- Guest type: ExternÃ­ host');
console.log('- Guests: 2 adults, 1 child');
console.log('');
console.log('Expected Calculation:');
console.log('Empty room: 400 KÄ Ã— 2 nights = 800 KÄ');
console.log('Adults: 2 Ã— 100 KÄ Ã— 2 nights = 400 KÄ');
console.log('Children: 1 Ã— 50 KÄ Ã— 2 nights = 100 KÄ');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('TOTAL: 1300 KÄ');
console.log('');
console.log('Steps:');
console.log('1. In same booking modal as Test 4');
console.log('2. Change dropdown to "ExternÃ­ host"');
console.log('3. Keep same guests: 2 adults, 1 child');
console.log('4. Check price preview');
console.log('');
console.log('Expected Results:');
console.log('âœ… Price preview updates to: 1300 KÄ');
console.log('âœ… Price changes immediately when dropdown changed');
console.log('âœ… Difference from ÃšTIA: 550 KÄ more expensive');
console.log('\nPress Enter when verified...\n');

// Test 6: Large Room Pricing
console.log('\nğŸ“‹ TEST 6: Large Room Pricing Test');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Scenario:');
console.log('- Room: P14 (large room)');
console.log('- Dates: 2025-12-10 to 2025-12-12 (2 nights)');
console.log('- Guest type: ZamÄ›stnanec ÃšTIA');
console.log('- Guests: 3 adults, 1 child');
console.log('');
console.log('Expected Calculation:');
console.log('Empty room: 350 KÄ Ã— 2 nights = 700 KÄ');
console.log('Adults: 3 Ã— 70 KÄ Ã— 2 nights = 420 KÄ');
console.log('Children: 1 Ã— 35 KÄ Ã— 2 nights = 70 KÄ');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('TOTAL: 1190 KÄ');
console.log('');
console.log('Steps:');
console.log('1. Open http://chata.utia.cas.cz');
console.log('2. Click on P14 (large room - 4 beds)');
console.log('3. Select dates: 2025-12-10 to 2025-12-12');
console.log('4. Select "ZamÄ›stnanec ÃšTIA"');
console.log('5. Set guests: 3 adults, 1 child');
console.log('6. Check price preview');
console.log('');
console.log('Expected Results:');
console.log('âœ… Price preview shows: 1190 KÄ');
console.log('âœ… Large room pricing applied (not small room)');
console.log('âœ… Difference vs small room ÃšTIA (750): 440 KÄ more');
console.log('\nPress Enter when verified...\n');

// Test 7: Edit Locked Booking (Old Booking)
console.log('\nğŸ“‹ TEST 7: Edit Locked Booking - Price Unchanged');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Scenario: Edit an existing booking created before 2025-11-04');
console.log('');
console.log('Steps:');
console.log('1. Open admin panel: http://chata.utia.cas.cz/admin.html');
console.log('2. Navigate to "Rezervace" tab');
console.log('3. Find any booking created before 2025-11-04');
console.log('4. Note the original price (e.g., 1234 KÄ)');
console.log('5. Click "Upravit" (Edit)');
console.log('6. Change dates (e.g., extend by 1 day)');
console.log('7. Click "UloÅ¾it zmÄ›ny" (Save changes)');
console.log('8. Verify the price after save');
console.log('');
console.log('Expected Results:');
console.log('âœ… Success notification appears');
console.log('âœ… Price remains UNCHANGED: original price (e.g., 1234 KÄ)');
console.log('âœ… Dates updated successfully');
console.log('âœ… Server logs show: "Price recalculation skipped for locked booking"');
console.log('âœ… Database price_locked column remains = 1');
console.log('');
console.log('To check server logs:');
console.log('docker-compose logs web | grep "Price recalculation skipped"');
console.log('\nPress Enter when verified...\n');

// Test 8: Multi-Room with Mixed Guest Types
console.log('\nğŸ“‹ TEST 8: Multi-Room Booking - Mixed Guest Types');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Scenario:');
console.log('- Room P12 (small): ÃšTIA, 2 adults');
console.log('- Room P13 (small): External, 2 adults, 1 child');
console.log('- Dates: 2025-12-10 to 2025-12-12 (2 nights)');
console.log('');
console.log('Expected Calculation:');
console.log('');
console.log('Room P12 (ÃšTIA):');
console.log('  Empty: 250 Ã— 2 = 500 KÄ');
console.log('  Adults: 2 Ã— 50 Ã— 2 = 200 KÄ');
console.log('  Subtotal: 700 KÄ');
console.log('');
console.log('Room P13 (External):');
console.log('  Empty: 400 Ã— 2 = 800 KÄ');
console.log('  Adults: 2 Ã— 100 Ã— 2 = 400 KÄ');
console.log('  Children: 1 Ã— 50 Ã— 2 = 100 KÄ');
console.log('  Subtotal: 1300 KÄ');
console.log('');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('TOTAL: 2000 KÄ');
console.log('');
console.log('Steps:');
console.log('1. Open http://chata.utia.cas.cz');
console.log('2. Click on P12, select dates, set "ZamÄ›stnanec ÃšTIA", 2 adults');
console.log('3. Click "PÅ™idat do rezervace"');
console.log('4. Click on P13, select same dates, set "ExternÃ­ host", 2 adults, 1 child');
console.log('5. Click "PÅ™idat do rezervace"');
console.log('6. Click "DokonÄit rezervaci"');
console.log('7. Check total price');
console.log('');
console.log('Expected Results:');
console.log('âœ… Total price: 2000 KÄ');
console.log('âœ… Booking form shows breakdown per room');
console.log('âœ… Each room has its own guest type preserved');
console.log('âœ… Price calculations correct for each room');
console.log('\nPress Enter when verified...\n');

// Test 9: Zero Adults (Only Toddlers)
console.log('\nğŸ“‹ TEST 9: Edge Case - Only Toddlers (No Adults)');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Test Scenario:');
console.log('- Room: P12 (small room)');
console.log('- Dates: 2025-12-10 to 2025-12-12 (2 nights)');
console.log('- Guest type: ZamÄ›stnanec ÃšTIA');
console.log('- Guests: 0 adults, 0 children, 2 toddlers');
console.log('');
console.log('Expected Calculation:');
console.log('Empty room: 250 KÄ Ã— 2 nights = 500 KÄ');
console.log('Adults: 0 Ã— 50 KÄ Ã— 2 nights = 0 KÄ');
console.log('Children: 0 Ã— 25 KÄ Ã— 2 nights = 0 KÄ');
console.log('Toddlers: FREE (always 0 KÄ)');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('TOTAL: 500 KÄ');
console.log('');
console.log('Steps:');
console.log('1. Open room booking modal');
console.log('2. Set adults to 0, children to 0, toddlers to 2');
console.log('3. Check price preview');
console.log('');
console.log('Expected Results:');
console.log('âœ… Price shows: 500 KÄ (only empty room price)');
console.log('âœ… Toddlers do not add to price');
console.log('âœ… Booking is allowed (at least 1 toddler = valid)');
console.log('\nPress Enter when verified...\n');

// Test 10: Database Verification
console.log('\nğŸ“‹ TEST 10: Database State Verification');
console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
console.log('Run these commands in terminal:');
console.log('');
console.log('1. Verify price lock migration:');
console.log('   docker exec marianska-chata node /app/verify-price-lock-quick.js');
console.log('');
console.log('   Expected: âœ… All 39 bookings locked');
console.log('');
console.log('2. Verify pricing formula:');
console.log('   docker exec marianska-chata node /app/test-new-pricing-formula.js');
console.log('');
console.log('   Expected: âœ… All 6 tests passed');
console.log('');
console.log('3. Check server logs:');
console.log('   docker-compose logs web | tail -50');
console.log('');
console.log('   Look for: [Migration] Locked prices for 39 existing bookings');
console.log('');
console.log('4. Verify price settings in database:');
console.log('   docker exec marianska-chata sqlite3 /app/data/bookings.db \\');
console.log('     "SELECT value FROM settings WHERE key = \'prices\';"');
console.log('');
console.log('   Expected: JSON with "empty" keys (not "base")');
console.log('\nPress Enter when verified...\n');

// Summary
console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸ“Š MANUAL TESTING SUMMARY');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('');
console.log('After completing all tests, verify:');
console.log('');
console.log('âœ… Admin panel shows "PrÃ¡zdnÃ½ pokoj" labels');
console.log('âœ… Empty room prices can be saved and loaded');
console.log('âœ… Per-room guest type dropdown appears and works');
console.log('âœ… ÃšTIA pricing calculates correctly');
console.log('âœ… External pricing calculates correctly');
console.log('âœ… Large room pricing differs from small room');
console.log('âœ… Locked bookings do NOT recalculate price on edit');
console.log('âœ… Multi-room with mixed guest types works');
console.log('âœ… Edge case (only toddlers) works');
console.log('âœ… Database migration successful');
console.log('âœ… Automated tests pass');
console.log('');
console.log('If all tests pass: âœ… READY FOR UAT');
console.log('If any test fails: âŒ Review and fix before UAT');
console.log('');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
