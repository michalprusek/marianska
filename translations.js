// Translation system
const translations = {
    cs: {
        // Header
        roomInfo: 'Informace o pokoj√≠ch',
        admin: 'Admin',

        // Calendar
        months: ['Leden', '√önor', 'B≈ôezen', 'Duben', 'Kvƒõten', 'ƒåerven',
                'ƒåervenec', 'Srpen', 'Z√°≈ô√≠', '≈ò√≠jen', 'Listopad', 'Prosinec'],
        weekDays: ['Po', '√öt', 'St', 'ƒåt', 'P√°', 'So', 'Ne'],

        // Room card
        capacity: 'Kapacita',
        guestTypeLabel: 'Typ hosta',
        adultsLabel: 'Dospƒõl√≠',
        childrenLabel: 'Dƒõti (3-18)',
        toddlersLabel: 'Batolata (<3)',
        employeeLabel: 'Zamƒõstnanec √öTIA',
        externalLabel: 'Extern√≠ host',
        externalGuests: 'Extern√≠ host√©',
        guestCount: 'Poƒçet host≈Ø',
        roomPrice: 'Cena za pokoj',

        // Booking section
        newBooking: 'Nov√° rezervace',
        selectDatePrompt: 'Vyberte term√≠n v kalend√°≈ôi',
        selectRoom: 'Vyberte pokoj',
        rooms: 'Pokoje',

        // Price calculator
        priceCalculation: 'Kalkulace ceny',
        availableCapacity: 'Dostupn√° kapacita',
        guestTypeEmployee: 'Zamƒõstnanec √öTIA',
        guestTypeExternal: 'Extern√≠ host',
        adults: 'Dospƒõl√≠',
        children: 'Dƒõti (3-18 let)',
        toddlers: 'Dƒõti do 3 let',
        totalPrice: 'Celkov√° cena',

        // Booking button
        createBooking: 'Vytvo≈ôit rezervaci',
        bulkBooking: 'Hromadn√° akce',
        bulkBookingTitle: 'Hromadn√° rezervace cel√© chaty',
        bulkPricingInfo: '<strong>Fixn√≠ cen√≠k pro hromadnou rezervaci:</strong><br>‚Ä¢ Z√°kladn√≠ cena: 2000 Kƒç za noc<br>‚Ä¢ Extern√≠ dospƒõl√Ω: +250 Kƒç/osoba<br>‚Ä¢ Extern√≠ d√≠tƒõ: +50 Kƒç/osoba<br>‚Ä¢ Zamƒõstnanec √öTIA dospƒõl√Ω: +100 Kƒç/osoba<br>‚Ä¢ D√≠tƒõ zamƒõstnance √öTIA: 0 Kƒç',
        bulkDateSelection: 'V√Ωbƒõr term√≠n≈Ø pro hromadnou rezervaci',
        bulkDateSelectionInfo: 'Vyberte dny v kalend√°≈ôi. ≈†ed√© dny maj√≠ rezervace a nelze je vybrat. Zelen√© dny jsou plnƒõ voln√© pro hromadnou rezervaci.',
        guestInfo: 'Informace o hostech',
        bulkTotalPriceLabel: 'Celkov√° cena za vybran√© dny:',
        cancel: 'Zru≈°it',
        proceedToBooking: 'Pokraƒçovat k rezervaci',

        // Booking modal
        completeBooking: 'Dokonƒçen√≠ rezervace',
        bookingSummary: 'Souhrn rezervace',
        term: 'Term√≠n',
        nights: 'Poƒçet noc√≠',
        guestType: 'Typ hosta',
        guests: 'Host√©',

        // Form fields
        billingDetails: 'Fakturaƒçn√≠ √∫daje',
        name: 'Jm√©no a p≈ô√≠jmen√≠',
        email: 'Email',
        phone: 'Telefon',
        company: 'Firma',
        address: 'Adresa',
        city: 'Mƒõsto',
        zip: 'PSƒå',
        ico: 'IƒåO',
        dic: 'DIƒå',
        notes: 'Pozn√°mky',
        cancel: 'Zru≈°it',
        confirmBooking: 'Potvrdit rezervaci',

        // Room info modal
        roomInfoTitle: 'Informace o pokoj√≠ch',
        roomCapacity: 'Kapacita pokoj≈Ø',
        totalCapacity: 'Celkov√° kapacita: 26 l≈Ø≈æek',
        roomLayout: 'Rozlo≈æen√≠ pokoj≈Ø',
        floor: 'patro',
        attic: 'podkrov√≠',
        smallRoom: 'Mal√Ω pokoj',
        largeRoom: 'Velk√Ω pokoj',
        beds: 'l≈Ø≈æka',
        bed: 'l≈Ø≈æko',
        priceList: 'Cen√≠k',
        employeesPricing: 'Zamƒõstnanci √öTIA',
        externalPricing: 'Extern√≠ host√©',
        smallRooms: 'Mal√© pokoje',
        largeRooms: 'Velk√© pokoje',
        basePrice: 'Z√°kladn√≠ cena (1 osoba)',
        additionalAdult: 'Dal≈°√≠ dospƒõl√Ω',
        childPrice: 'D√≠tƒõ 3-18 let',
        toddlerPrice: 'D√≠tƒõ do 3 let',
        free: 'zdarma',
        perNight: '/noc',
        perPerson: '/osoba',
        christmasPeriod: 'V√°noƒçn√≠ obdob√≠',
        christmasRules: 'Rezervace bƒõhem v√°noƒçn√≠ch pr√°zdnin podl√©haj√≠ speci√°ln√≠m pravidl≈Øm. Zamƒõstnanci √öTIA mohou rezervovat max. 1-2 pokoje do 30.9. p≈ô√≠slu≈°n√©ho roku.',
        christmasTitle: 'üéÑ V√°noƒçn√≠ obdob√≠',
        christmasInfo: 'Rezervace bƒõhem v√°noƒçn√≠ch pr√°zdnin podl√©haj√≠ speci√°ln√≠m pravidl≈Øm. Zamƒõstnanci √öTIA mohou rezervovat max. 1-2 pokoje do 30.9. p≈ô√≠slu≈°n√©ho roku.',

        // Status
        available: 'Voln√Ω',
        booked: 'Obsazen√Ω',
        blocked: 'Blokovan√Ω',

        // Messages
        selectDateError: 'Pros√≠m vyberte term√≠n rezervace',
        selectRoomError: 'Pros√≠m vyberte alespo≈à jeden pokoj',
        bookingSuccess: 'Rezervace byla √∫spƒõ≈°nƒõ vytvo≈ôena! ƒå√≠slo rezervace:',
        confirmationSent: 'Potvrzen√≠ bylo odesl√°no na email',

        // Booking details modal
        bookingDetails: 'Detail rezervace',
        bookingNumber: 'ƒå√≠slo rezervace',
        created: 'Vytvo≈ôeno',
        contactOwner: 'Kontaktovat vlastn√≠ka',
        contactOwnerTitle: 'Kontaktovat vlastn√≠ka rezervace',
        contactOwnerInfo: 'Va≈°e zpr√°va bude odesl√°na vlastn√≠kovi rezervace. Email vlastn√≠ka z≈Øst√°v√° skryt√Ω.',
        yourEmail: 'V√°≈° email',
        message: 'Zpr√°va',
        sendMessage: 'Odeslat zpr√°vu',
        messageSent: 'Zpr√°va byla √∫spƒõ≈°nƒõ odesl√°na vlastn√≠kovi rezervace',

        // Bulk pricing
        bulkPriceList: 'Cen√≠k hromadn√© rezervace',
        bulkPriceNote: 'Pozn√°mka: Hromadn√° rezervace znamen√° pron√°jem cel√© chaty pro jeden term√≠n. Dƒõti do 3 let jsou v≈ædy zdarma.',
        selectedTerms: 'Vybran√© term√≠ny',

        // Units and plurals
        night: 'noc',
        nights2to4: 'noci',
        nights5plus: 'noc√≠',
        adult: 'dospƒõl√Ω',
        adults2to4: 'dospƒõl√≠',
        adults5plus: 'dospƒõl√Ωch',
        child: 'd√≠tƒõ',
        children2to4: 'dƒõti',
        children5plus: 'dƒõt√≠'
    },
    en: {
        // Header
        roomInfo: 'Room Information',
        admin: 'Admin',

        // Calendar
        months: ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'],
        weekDays: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],

        // Room card
        capacity: 'Capacity',
        guestTypeLabel: 'Guest Type',
        adultsLabel: 'Adults',
        childrenLabel: 'Children (3-18)',
        toddlersLabel: 'Toddlers (<3)',
        employeeLabel: '√öTIA Employee',
        externalLabel: 'External Guest',
        externalGuests: 'External Guests',
        guestCount: 'Number of Guests',
        roomPrice: 'Room Price',

        // Booking section
        newBooking: 'New Booking',
        selectDatePrompt: 'Select dates in the calendar',
        selectRoom: 'Select room',
        rooms: 'Rooms',

        // Price calculator
        priceCalculation: 'Price Calculation',
        availableCapacity: 'Available Capacity',
        guestTypeEmployee: '√öTIA Employee',
        guestTypeExternal: 'External Guest',
        adults: 'Adults',
        children: 'Children (3-18 years)',
        toddlers: 'Children under 3',
        totalPrice: 'Total Price',

        // Booking button
        createBooking: 'Create Booking',
        bulkBooking: 'Bulk Booking',
        bulkBookingTitle: 'Bulk Booking - Entire Cottage',
        bulkPricingInfo: '<strong>Fixed pricing for bulk booking:</strong><br>‚Ä¢ Base price: 2000 CZK per night<br>‚Ä¢ External adult: +250 CZK/person<br>‚Ä¢ External child: +50 CZK/person<br>‚Ä¢ √öTIA employee adult: +100 CZK/person<br>‚Ä¢ √öTIA employee child: 0 CZK',
        bulkDateSelection: 'Date Selection for Bulk Booking',
        bulkDateSelectionInfo: 'Select days in the calendar. Gray days have bookings and cannot be selected. Green days are fully available for bulk booking.',
        guestInfo: 'Guest Information',
        bulkTotalPriceLabel: 'Total price for selected days:',
        cancel: 'Cancel',
        proceedToBooking: 'Proceed to Booking',

        // Booking modal
        completeBooking: 'Complete Booking',
        bookingSummary: 'Booking Summary',
        term: 'Period',
        nights: 'Number of nights',
        guestType: 'Guest Type',
        guests: 'Guests',

        // Form fields
        billingDetails: 'Billing Details',
        name: 'Full Name',
        email: 'Email',
        phone: 'Phone',
        company: 'Company',
        address: 'Address',
        city: 'City',
        zip: 'ZIP Code',
        ico: 'Company ID',
        dic: 'VAT ID',
        notes: 'Notes',
        cancel: 'Cancel',
        confirmBooking: 'Confirm Booking',

        // Room info modal
        roomInfoTitle: 'Room Information',
        roomCapacity: 'Room Capacity',
        totalCapacity: 'Total capacity: 26 beds',
        roomLayout: 'Room Layout',
        floor: 'floor',
        attic: 'attic',
        smallRoom: 'Small room',
        largeRoom: 'Large room',
        beds: 'beds',
        bed: 'bed',
        priceList: 'Price List',
        employeesPricing: '√öTIA Employees',
        externalPricing: 'External Guests',
        smallRooms: 'Small rooms',
        largeRooms: 'Large rooms',
        basePrice: 'Base price (1 person)',
        additionalAdult: 'Additional adult',
        childPrice: 'Child 3-18 years',
        toddlerPrice: 'Child under 3',
        free: 'free',
        perNight: '/night',
        perPerson: '/person',
        christmasPeriod: 'Christmas Period',
        christmasRules: 'Bookings during Christmas holidays are subject to special rules. √öTIA employees can book max. 1-2 rooms until September 30th of the respective year.',
        christmasTitle: 'üéÑ Christmas Period',
        christmasInfo: 'Bookings during Christmas holidays are subject to special rules. √öTIA employees can book max. 1-2 rooms until September 30th of the respective year.',

        // Status
        available: 'Available',
        booked: 'Booked',
        blocked: 'Blocked',

        // Messages
        selectDateError: 'Please select booking dates',
        selectRoomError: 'Please select at least one room',
        bookingSuccess: 'Booking successfully created! Booking number:',
        confirmationSent: 'Confirmation has been sent to email',

        // Booking details modal
        bookingDetails: 'Booking Details',
        bookingNumber: 'Booking Number',
        created: 'Created',
        contactOwner: 'Contact Owner',
        contactOwnerTitle: 'Contact Booking Owner',
        contactOwnerInfo: 'Your message will be sent to the booking owner. The owner\'s email remains hidden.',
        yourEmail: 'Your email',
        message: 'Message',
        sendMessage: 'Send Message',
        messageSent: 'Message successfully sent to booking owner',

        // Bulk pricing
        bulkPriceList: 'Bulk Booking Price List',
        bulkPriceNote: 'Note: Bulk booking means renting the entire cottage for one period. Children under 3 are always free.',
        selectedTerms: 'Selected dates',

        // Units and plurals (in English, plurals are simpler)
        night: 'night',
        nights2to4: 'nights',
        nights5plus: 'nights',
        adult: 'adult',
        adults2to4: 'adults',
        adults5plus: 'adults',
        child: 'child',
        children2to4: 'children',
        children5plus: 'children'
    }
};

class LanguageManager {
    constructor() {
        this.currentLang = localStorage.getItem('language') || 'cs';
        this.init();
    }

    init() {
        // Set initial language
        document.documentElement.lang = this.currentLang;

        // Set switch position
        const languageSwitch = document.getElementById('languageSwitch');
        if (languageSwitch) {
            languageSwitch.checked = this.currentLang === 'en';
        }

        // Apply translations
        this.applyTranslations();
    }

    switchLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('language', lang);
        document.documentElement.lang = lang;
        this.applyTranslations();
    }

    t(key) {
        return translations[this.currentLang][key] || translations['cs'][key] || key;
    }

    applyTranslations() {
        // Update all elements with data-translate attribute
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = this.t(key);

            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                if (element.placeholder) {
                    element.placeholder = translation;
                }
            } else {
                element.textContent = translation;
            }
        });

        // Update specific elements
        this.updateSpecificElements();
    }

    updateSpecificElements() {
        // Update room info button
        const roomInfoBtn = document.getElementById('roomInfoBtn');
        if (roomInfoBtn) {
            const btnText = roomInfoBtn.querySelector('.btn-text');
            if (btnText) btnText.textContent = this.t('roomInfo');
        }

        // Update room beds text
        document.querySelectorAll('.room-beds').forEach(element => {
            const beds = element.getAttribute('data-beds');
            if (beds) {
                const text = this.currentLang === 'cs'
                    ? `${beds} ${beds === '1' ? 'l≈Ø≈æko' : 'l≈Ø≈æka'}`
                    : `${beds} ${beds === '1' ? 'bed' : 'beds'}`;
                element.textContent = text;
            }
        });

        // NOTE: Calendar is updated separately in the language switch event listener
        // to avoid duplicate rendering
    }
}

// Export for use
const langManager = new LanguageManager();