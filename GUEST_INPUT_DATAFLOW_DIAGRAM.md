# Guest Input Generation - Data Flow Diagrams

**Date**: 2025-11-04
**Purpose**: Visual representation of guest input lifecycle

---

## DIAGRAM 1: Complete Guest Input Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER OPENS SINGLE ROOM MODAL                          â”‚
â”‚              (showRoomBookingModal() in single-room-booking.js)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  DEFAULT: 1 adult, 0 kids  â”‚
                  â”‚  stored in roomGuests Map   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ generateGuestNamesInputsâ”‚
                    â”‚   (1, 0, 0)             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚ Adults (1)    â”‚  â”‚ Children   â”‚  â”‚ Toddlers   â”‚
        â”‚ Container:    â”‚  â”‚ Container: â”‚  â”‚ Container: â”‚
        â”‚ singleRoom... â”‚  â”‚ singleRoom â”‚  â”‚ singleRoom â”‚
        â”‚ NamesContainerâ”‚  â”‚ Children...â”‚  â”‚ Toddlers...â”‚
        â”‚               â”‚  â”‚ Container  â”‚  â”‚ Container  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ For each guest type (adults, children, toddlers)
        â”‚ Create row with:
        â”‚   - firstName input: id="singleRoomAdultFirstName1"
        â”‚   - lastName input:  id="singleRoomAdultLastName1"
        â”‚   - toggle switch:   id="adult1GuestTypeToggle"
        â”‚   - type label:      "ÃšTIA" (green) or "EXT" (red)
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Register Event Listeners:  â”‚
        â”‚ .addEventListener('change' â”‚
        â”‚   on toggle switches       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Append all rows to containers        â”‚
        â”‚ Modal now displays with inputs       â”‚
        â”‚ User can enter guest names + types   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAM 2: Guest Count Adjustment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               USER CLICKS +/- BUTTON (e.g., "+" for adults)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HTML Event Fired:         â”‚
    â”‚ onclick="app.adjustGuests  â”‚
    â”‚   ('adults', 1)"          â”‚
    â”‚     OR                     â”‚
    â”‚ addEventListener click     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ adjustGuests('adults', 1)                       â”‚
    â”‚ [booking-app.js:496]                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Get current state from Map:        â”‚
    â”‚    roomGuests.get(currentBookingRoom) â”‚
    â”‚    Result: { adults: 1, children: 0, â”‚
    â”‚             toddlers: 0, guestType:  â”‚
    â”‚             'utia' }                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. Calculate new value:               â”‚
    â”‚    newValue = guests.adults + 1       â”‚
    â”‚    newValue = 2                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. Validate room capacity:            â”‚
    â”‚    newTotal = 2 + children            â”‚
    â”‚    if newTotal > room.beds:           â”‚
    â”‚      show warning & return            â”‚
    â”‚    else: continue                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. Update state in Map:               â”‚
    â”‚    guests.adults = 2                  â”‚
    â”‚    roomGuests.set(roomId, guests)     â”‚
    â”‚    STATE UPDATED âœ“                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. Update DOM display:                â”‚
    â”‚    singleRoomEl.textContent = "2"     â”‚
    â”‚    User sees counter changed          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 6. Recalculate price:                 â”‚
    â”‚    await updatePriceCalculation()     â”‚
    â”‚    Price updated in display           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 7. REGENERATE INPUT FIELDS:                     â”‚
    â”‚    singleRoomBooking.generateGuestNamesInputs(  â”‚
    â”‚      2,    /* adults */                         â”‚
    â”‚      0,    /* children */                        â”‚
    â”‚      0     /* toddlers */                        â”‚
    â”‚    )                                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  generateGuestNamesInputs(2, 0, 0)                        â”‚
    â”‚  [single-room-booking.js:499]                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Get container:                                  â”‚
    â”‚ adultsContainer = getElementById(               â”‚
    â”‚   'singleRoomAdultsNamesContainer'              â”‚
    â”‚ )                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âš ï¸  CRITICAL: CLEAR EXISTING DATA:              â”‚
    â”‚    adultsContainer.innerHTML = ''               â”‚
    â”‚                                                 â”‚
    â”‚  ğŸ‘¤ User's entered data: DESTROYED! âŒ          â”‚
    â”‚  - "Jan" (firstName input) â†’ LOST               â”‚
    â”‚  - "NovÃ¡k" (lastName input) â†’ LOST             â”‚
    â”‚  - External toggle state â†’ LOST                 â”‚
    â”‚                                                 â”‚
    â”‚  âœ“ Count stored in roomGuests Map: PRESERVED   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Create NEW empty inputs for 2 adults:           â”‚
    â”‚                                                 â”‚
    â”‚ Loop i=1:                                       â”‚
    â”‚  - Create <input id="singleRoomAdultFirstName1">â”‚
    â”‚  - Create <input id="singleRoomAdultLastName1"> â”‚
    â”‚  - Create <input id="adult1GuestTypeToggle">    â”‚
    â”‚  - Append row with all 3 elements               â”‚
    â”‚                                                 â”‚
    â”‚ Loop i=2: (NEW - was not there before)         â”‚
    â”‚  - Create <input id="singleRoomAdultFirstName2">â”‚
    â”‚  - Create <input id="singleRoomAdultLastName2"> â”‚
    â”‚  - Create <input id="adult2GuestTypeToggle">    â”‚
    â”‚  - Append row with all 3 elements               â”‚
    â”‚                                                 â”‚
    â”‚ Both inputs are EMPTY - user must re-enter âš ï¸  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Register event listeners on new toggles:        â”‚
    â”‚                                                 â”‚
    â”‚ For each toggle:                                â”‚
    â”‚  .addEventListener('change', function() {       â”‚
    â”‚    if (checked) {                               â”‚
    â”‚      â†’ Show "EXT" (red)                         â”‚
    â”‚    } else {                                     â”‚
    â”‚      â†’ Show "ÃšTIA" (green)                      â”‚
    â”‚    }                                            â”‚
    â”‚  })                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Modal now shows:                                â”‚
    â”‚                                                 â”‚
    â”‚  DospÄ›lÃ­ (2)                                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
    â”‚  â”‚ [FirstName input empty]                      â”‚
    â”‚  â”‚ [LastName input empty ]                      â”‚
    â”‚  â”‚ [ÃšTIA toggle]         â”‚                      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
    â”‚  â”‚ [FirstName input empty] â† User must          â”‚
    â”‚  â”‚ [LastName input empty ] â† re-enter here!    â”‚
    â”‚  â”‚ [ÃšTIA toggle]         â”‚                      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚                                                 â”‚
    â”‚ âœ“ First adult's name "Jan NovÃ¡k" gone!        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAM 3: Input Field Structure (Single Adult)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SINGLE ADULT INPUT ROW                      â”‚
â”‚                                                               â”‚
â”‚  <div style="display: flex; gap: 0.5rem; ...">              â”‚
â”‚                                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ <input                                              â”‚   â”‚
â”‚    â”‚   type="text"                                       â”‚   â”‚
â”‚    â”‚   id="singleRoomAdultFirstName1"                    â”‚   â”‚
â”‚    â”‚   placeholder="KÅ™estnÃ­ jmÃ©no"                      â”‚   â”‚
â”‚    â”‚   data-guest-type="adult"                           â”‚   â”‚
â”‚    â”‚   data-guest-index="1"                              â”‚   â”‚
â”‚    â”‚   required                                          â”‚   â”‚
â”‚    â”‚   minLength="2"                                     â”‚   â”‚
â”‚    â”‚   maxLength="50"                                    â”‚   â”‚
â”‚    â”‚ />                                                  â”‚   â”‚
â”‚    â”‚ VALUE IN DOM: "Jan"                                â”‚   â”‚
â”‚    â”‚ VALUE IN roomGuests: NOT STORED                    â”‚   â”‚
â”‚    â”‚ DESTROYED ON: adjustGuests() called                â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ <input                                              â”‚   â”‚
â”‚    â”‚   type="text"                                       â”‚   â”‚
â”‚    â”‚   id="singleRoomAdultLastName1"                     â”‚   â”‚
â”‚    â”‚   placeholder="PÅ™Ã­jmenÃ­"                           â”‚   â”‚
â”‚    â”‚   data-guest-type="adult"                           â”‚   â”‚
â”‚    â”‚   data-guest-index="1"                              â”‚   â”‚
â”‚    â”‚   required                                          â”‚   â”‚
â”‚    â”‚   minLength="2"                                     â”‚   â”‚
â”‚    â”‚   maxLength="50"                                    â”‚   â”‚
â”‚    â”‚ />                                                  â”‚   â”‚
â”‚    â”‚ VALUE IN DOM: "NovÃ¡k"                              â”‚   â”‚
â”‚    â”‚ VALUE IN roomGuests: NOT STORED                    â”‚   â”‚
â”‚    â”‚ DESTROYED ON: adjustGuests() called                â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ <label style="...">                                â”‚   â”‚
â”‚    â”‚   <input                                            â”‚   â”‚
â”‚    â”‚     type="checkbox"                                 â”‚   â”‚
â”‚    â”‚     id="adult1GuestTypeToggle"                      â”‚   â”‚
â”‚    â”‚     data-guest-type="adult"                         â”‚   â”‚
â”‚    â”‚     data-guest-index="1"                            â”‚   â”‚
â”‚    â”‚     data-guest-price-type="true"  â† Marker!        â”‚   â”‚
â”‚    â”‚     checked="false"  â† ÃšTIA (default)              â”‚   â”‚
â”‚    â”‚     style="opacity: 0; ..."  â† Hidden              â”‚   â”‚
â”‚    â”‚   />                                                â”‚   â”‚
â”‚    â”‚                                                     â”‚   â”‚
â”‚    â”‚   <span style="...">  â† Visual slider             â”‚   â”‚
â”‚    â”‚     <span>  â† Thumb (white circle)                 â”‚   â”‚
â”‚    â”‚   </span>                                           â”‚   â”‚
â”‚    â”‚ </label>                                            â”‚   â”‚
â”‚    â”‚                                                     â”‚   â”‚
â”‚    â”‚ <span>ÃšTIA</span>  â† Text label (green)           â”‚   â”‚
â”‚    â”‚                                                     â”‚   â”‚
â”‚    â”‚ CHECKED IN DOM: false                              â”‚   â”‚
â”‚    â”‚ VISUAL STATE: Green slider, "ÃšTIA" text            â”‚   â”‚
â”‚    â”‚ STATE IN roomGuests: NOT STORED                    â”‚   â”‚
â”‚    â”‚ EVENT LISTENER: .addEventListener('change', ...)  â”‚   â”‚
â”‚    â”‚ DESTROYED ON: adjustGuests() called                â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  </div>                                                       â”‚
â”‚                                                               â”‚
â”‚  DATA FLOW SUMMARY FOR THIS ROW:                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ User Input â†’ DOM elements (firstName, lastName,    â”‚   â”‚
â”‚  â”‚               toggle checked state)                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚                 â†“                                    â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ collectGuestNames() Reads â†’ { firstName: "Jan",   â”‚   â”‚
â”‚  â”‚                               lastName: "NovÃ¡k",   â”‚   â”‚
â”‚  â”‚                               guestPriceType:     â”‚   â”‚
â”‚  â”‚                               "utia" }            â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚                 â†“                                    â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ confirmRoomBooking() â†’ Creates booking with       â”‚   â”‚
â”‚  â”‚                        guest names array          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚                 â†“                                    â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ If user changes guest count BEFORE submittion:    â”‚   â”‚
â”‚  â”‚ adjustGuests() â†’ innerHTML = '' â†’ DATA LOST! âš ï¸   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAM 4: State Storage vs. Input Values

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATE STORAGE COMPARISON                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     roomGuests MAP              â”‚   â”‚      DOM INPUT ELEMENTS          â”‚
â”‚   (Persistent across regens)    â”‚   â”‚     (Destroyed on regeneration)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚   â”‚                                  â”‚
â”‚ Map<roomId, {                   â”‚   â”‚ <input                           â”‚
â”‚   adults: 2,                    â”‚   â”‚   id="singleRoomAdultFirstName1" â”‚
â”‚   children: 1,                  â”‚   â”‚   value="Jan"                    â”‚
â”‚   toddlers: 0,                  â”‚   â”‚   data-guest-type="adult"        â”‚
â”‚   guestType: 'utia'             â”‚   â”‚   data-guest-index="1"           â”‚
â”‚ }>                              â”‚   â”‚ />                               â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚ âœ“ Persists after                â”‚   â”‚ âœ“ Updated as user types         â”‚
â”‚   adjustGuests()                â”‚   â”‚ âœ— Lost when container.innerHTML  â”‚
â”‚                                 â”‚   â”‚   = ''                           â”‚
â”‚ âœ“ Used to remember counts       â”‚   â”‚                                  â”‚
â”‚ âœ— Doesn't store names           â”‚   â”‚ <input                           â”‚
â”‚ âœ— Doesn't store toggle state    â”‚   â”‚   id="singleRoomAdultLastName1"  â”‚
â”‚                                 â”‚   â”‚   value="NovÃ¡k"                  â”‚
â”‚                                 â”‚   â”‚   data-guest-type="adult"        â”‚
â”‚                                 â”‚   â”‚   data-guest-index="1"           â”‚
â”‚                                 â”‚   â”‚ />                               â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚                                 â”‚   â”‚ <input                           â”‚
â”‚                                 â”‚   â”‚   id="adult1GuestTypeToggle"     â”‚
â”‚                                 â”‚   â”‚   type="checkbox"                â”‚
â”‚                                 â”‚   â”‚   checked="true"  (External)     â”‚
â”‚                                 â”‚   â”‚   data-guest-price-type="true"   â”‚
â”‚                                 â”‚   â”‚ />                               â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚                                 â”‚   â”‚ + Visual elements (slider, text) â”‚
â”‚                                 â”‚   â”‚   derived from toggle state      â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLOW EXAMPLE: User has 1 adult, enters "Jan NovÃ¡k", toggles to External
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Step 1: Initial State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ roomGuests Map:                 â”‚   â”‚ DOM Inputs:                      â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚ {                               â”‚   â”‚ firstName1.value = "Jan"         â”‚
â”‚   adults: 1,                    â”‚   â”‚ lastName1.value = "NovÃ¡k"        â”‚
â”‚   children: 0,                  â”‚   â”‚ adult1GuestTypeToggle.checked    â”‚
â”‚   toddlers: 0,                  â”‚   â”‚   = true (External)              â”‚
â”‚   guestType: 'utia'             â”‚   â”‚                                  â”‚
â”‚ }                               â”‚   â”‚ Visual: Red slider, "EXT" text   â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚ âœ“ Persists                      â”‚   â”‚ âœ“ User sees their data           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: User clicks "+" to add second adult
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ adjustGuests() updates:         â”‚   â”‚ generateGuestNamesInputs()       â”‚
â”‚                                 â”‚   â”‚ is called with (2, 0, 0)         â”‚
â”‚ {                               â”‚   â”‚                                  â”‚
â”‚   adults: 2,     âœ“ Updated      â”‚   â”‚ Then: container.innerHTML = ''   â”‚
â”‚   children: 0,                  â”‚   â”‚                                  â”‚
â”‚   toddlers: 0,                  â”‚   â”‚ firstName1 = GONE âœ—              â”‚
â”‚   guestType: 'utia'             â”‚   â”‚ lastName1 = GONE âœ—               â”‚
â”‚ }                               â”‚   â”‚ adult1GuestTypeToggle = GONE âœ—   â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚ âœ“ Still persists                â”‚   â”‚ 2 NEW EMPTY inputs created:      â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚                                 â”‚   â”‚ firstName1.value = "" (empty)    â”‚
â”‚                                 â”‚   â”‚ lastName1.value = ""  (empty)    â”‚
â”‚                                 â”‚   â”‚ adult1GuestTypeToggle.checked    â”‚
â”‚                                 â”‚   â”‚   = false (reset to ÃšTIA default)â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚                                 â”‚   â”‚ firstName2.value = "" (empty)    â”‚
â”‚                                 â”‚   â”‚ lastName2.value = ""  (empty)    â”‚
â”‚                                 â”‚   â”‚ adult2GuestTypeToggle.checked    â”‚
â”‚                                 â”‚   â”‚   = false (default)              â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚                                 â”‚   â”‚ Visual: Both show green, "ÃšTIA"  â”‚
â”‚                                 â”‚   â”‚                                  â”‚
â”‚                                 â”‚   â”‚ âœ— User data LOST!               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAM 5: Data Collection (collectGuestNames)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  collectGuestNames() EXECUTION FLOW                       â”‚
â”‚              [Called from confirmRoomBooking() before submit]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Get all input containers
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ document.getElementById(      â”‚
â”‚   'singleRoomGuestNamesSection'
â”‚ )                            â”‚
â”‚                              â”‚
â”‚ Contains 3 sub-containers:  â”‚
â”‚ - singleRoomAdultsNamesCont â”‚
â”‚ - singleRoomChildrenNamesCo â”‚
â”‚ - singleRoomToddlersNamesCo â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Query all NAME input fields (NOT toggles)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ section.querySelectorAll(                                   â”‚
â”‚   'input[data-guest-type]:not([data-guest-price-type])'     â”‚
â”‚ )                                                            â”‚
â”‚                                                              â”‚
â”‚ Selector breakdown:                                          â”‚
â”‚ - [data-guest-type]       â†’ Has attribute data-guest-type   â”‚
â”‚ - :not([data-guest-price-type]) â†’ NOT toggle switches       â”‚
â”‚                                                              â”‚
â”‚ Returns: All firstName & lastName inputs only (6 if 2       â”‚
â”‚          adults, 1 child, 1 toddler)                        â”‚
â”‚                                                              â”‚
â”‚ Results found:                                               â”‚
â”‚ 1. singleRoomAdultFirstName1 â†’ value="Jan"                  â”‚
â”‚ 2. singleRoomAdultLastName1  â†’ value="NovÃ¡k"                â”‚
â”‚ 3. singleRoomAdultFirstName2 â†’ value="Petr"                 â”‚
â”‚ 4. singleRoomAdultLastName2  â†’ value="Svoboda"              â”‚
â”‚ 5. singleRoomChildFirstName1 â†’ value="Anna"                 â”‚
â”‚ 6. singleRoomChildLastName1  â†’ value="NovÃ¡kovÃ¡"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Group by guest (create Map with key="type-index")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ guestMap:                                                   â”‚
â”‚                                                              â”‚
â”‚ "adult-1" â†’ {                                               â”‚
â”‚   personType: "adult",                                      â”‚
â”‚   firstName: "Jan",        â† from input                      â”‚
â”‚   lastName: "NovÃ¡k"        â† from input                      â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â”‚ "adult-2" â†’ {                                               â”‚
â”‚   personType: "adult",                                      â”‚
â”‚   firstName: "Petr",                                        â”‚
â”‚   lastName: "Svoboda"                                       â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â”‚ "child-1" â†’ {                                               â”‚
â”‚   personType: "child",                                      â”‚
â”‚   firstName: "Anna",                                        â”‚
â”‚   lastName: "NovÃ¡kovÃ¡"                                      â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Validate all fields are filled
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For each guest in guestMap:                                 â”‚
â”‚                                                              â”‚
â”‚ if (!firstName || !lastName) {                              â”‚
â”‚   â†’ Show error: "VyplÅˆte vÅ¡echna jmÃ©na hostÅ¯"              â”‚
â”‚   â†’ Return null (validation failed)                         â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â”‚ Each field is also checked during input:                    â”‚
â”‚ - input.value.trim()  â†’ Must be non-empty                  â”‚
â”‚ - value.length < 2    â†’ Reject if too short                â”‚
â”‚ - Border color: red   â†’ Visual error indicator             â”‚
â”‚                                                              â”‚
â”‚ Result: All guests have both firstName and lastName âœ“       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Query all TOGGLE inputs (guest type selection)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ section.querySelectorAll(                                   â”‚
â”‚   'input[data-guest-price-type]'                            â”‚
â”‚ )                                                            â”‚
â”‚                                                              â”‚
â”‚ Selector: [data-guest-price-type]                           â”‚
â”‚ This attribute is ONLY on toggle switches                   â”‚
â”‚                                                              â”‚
â”‚ Returns:                                                     â”‚
â”‚ 1. adult1GuestTypeToggle    â†’ checked=false (ÃšTIA)          â”‚
â”‚ 2. adult2GuestTypeToggle    â†’ checked=true  (External)      â”‚
â”‚ 3. child1GuestTypeToggle    â†’ checked=false (ÃšTIA)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 6: Add guest type to each guest in map
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For each toggle:                                            â”‚
â”‚   key = `${guestType}-${guestIndex}`                        â”‚
â”‚   guest.guestPriceType = checked ? 'external' : 'utia'      â”‚
â”‚                                                              â”‚
â”‚ Updated guestMap:                                           â”‚
â”‚                                                              â”‚
â”‚ "adult-1" â†’ {                                               â”‚
â”‚   personType: "adult",                                      â”‚
â”‚   firstName: "Jan",                                         â”‚
â”‚   lastName: "NovÃ¡k",                                        â”‚
â”‚   guestPriceType: "utia"        â† false (default)           â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â”‚ "adult-2" â†’ {                                               â”‚
â”‚   personType: "adult",                                      â”‚
â”‚   firstName: "Petr",                                        â”‚
â”‚   lastName: "Svoboda",                                      â”‚
â”‚   guestPriceType: "external"    â† true (toggled)            â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â”‚ "child-1" â†’ {                                               â”‚
â”‚   personType: "child",                                      â”‚
â”‚   firstName: "Anna",                                        â”‚
â”‚   lastName: "NovÃ¡kovÃ¡",                                     â”‚
â”‚   guestPriceType: "utia"        â† false                     â”‚
â”‚ }                                                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 7: Final validation & return
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For each guest, verify:                                     â”‚
â”‚ 1. firstName exists                                         â”‚
â”‚ 2. lastName exists                                          â”‚
â”‚ 3. guestPriceType exists                                    â”‚
â”‚                                                              â”‚
â”‚ If any missing â†’ show error & return null                   â”‚
â”‚                                                              â”‚
â”‚ Construct final array:                                      â”‚
â”‚ guestNames = [                                              â”‚
â”‚   {                                                          â”‚
â”‚     personType: "adult",                                    â”‚
â”‚     firstName: "Jan",                                       â”‚
â”‚     lastName: "NovÃ¡k",                                      â”‚
â”‚     guestPriceType: "utia"                                  â”‚
â”‚   },                                                         â”‚
â”‚   {                                                          â”‚
â”‚     personType: "adult",                                    â”‚
â”‚     firstName: "Petr",                                      â”‚
â”‚     lastName: "Svoboda",                                    â”‚
â”‚     guestPriceType: "external"                              â”‚
â”‚   },                                                         â”‚
â”‚   {                                                          â”‚
â”‚     personType: "child",                                    â”‚
â”‚     firstName: "Anna",                                      â”‚
â”‚     lastName: "NovÃ¡kovÃ¡",                                   â”‚
â”‚     guestPriceType: "utia"                                  â”‚
â”‚   }                                                          â”‚
â”‚ ]                                                            â”‚
â”‚                                                              â”‚
â”‚ return guestNames âœ“                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAM 6: Event Listener Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          EVENT LISTENERS FOR TOGGLE SWITCHES (Guest Type)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CREATED: During generateGuestNamesInputs() [Line 581, 683, 785]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

For each toggle input:

  toggleInput.addEventListener('change', function() {
    if (this.checked) {
      // External selected (red)
      toggleSlider.style.backgroundColor = '#dc2626';
      toggleThumb.style.transform = 'translateX(20px)';
      toggleText.textContent = 'EXT';
      toggleText.style.color = '#dc2626';
    } else {
      // ÃšTIA selected (green)
      toggleSlider.style.backgroundColor = '#059669';
      toggleThumb.style.transform = 'translateX(0)';
      toggleText.textContent = 'ÃšTIA';
      toggleText.style.color = '#059669';
    }
  });

SCOPE: This handler closes over:
â”€â”€â”€â”€â”€â”€â”€
  - toggleSlider (the visual slider element)
  - toggleThumb (the moving circle)
  - toggleText (the "ÃšTIA"/"EXT" text label)

TRIGGERED: When user clicks toggle or changes checkbox programmatically


LIFETIME:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Step 1: Generate Inputs
        â”œâ”€ Create toggle checkbox elements
        â”œâ”€ Register event listeners on each
        â””â”€ Listener references 3 visual elements (slider, thumb, text)

Step 2: User Interacts
        â”œâ”€ Clicks toggle â†’ Listener fires
        â”œâ”€ Updates visual state (colors, position, text)
        â””â”€ DOM updates immediately

Step 3: Adjust Guest Count
        â”œâ”€ adjustGuests() called
        â”œâ”€ generateGuestNamesInputs() called
        â”œâ”€ container.innerHTML = ''  â† OLD LISTENERS DESTROYED!
        â””â”€ NEW listeners created on NEW toggle elements

PROBLEM:
â”€â”€â”€â”€â”€â”€â”€
  After regeneration, the old listener references no longer point to
  valid DOM elements, but JavaScript garbage collection should clean them.
  However, if listeners were not properly cleaned, this could cause memory leaks.

CURRENT STATUS: Listeners are recreated on each regeneration (no explicit cleanup).
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


USAGE IN COLLECTION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

When collectGuestNames() runs, it queries the NEW toggles:

  section.querySelectorAll('input[data-guest-price-type]')
  â”œâ”€ Finds ALL toggles currently in DOM
  â”œâ”€ Reads their .checked property
  â”œâ”€ Maps to 'utia' or 'external'
  â””â”€ Includes in guestNames array

The event listeners on these new toggles are invoked by user interaction,
not by collectGuestNames().
```

---

## KEY INSIGHTS

1. **Two Layers of Storage**:
   - Persistent: `roomGuests Map` (counts only)
   - Ephemeral: DOM input elements (names, toggle states) - destroyed on regeneration

2. **Data Loss Trigger**: `innerHTML = ''` in generateGuestNamesInputs()

3. **No Backup Storage**: Guest names and toggle states are never saved to persistent state

4. **Collection Timing**: collectGuestNames() is called AFTER all inputs are already created (potentially after data loss)

5. **Event Listener Chain**: Listeners reference visual elements that get recreated, potentially losing references

6. **Validation Timing**: Validation occurs at collection time, not during input, so invalid data can be entered but caught later
