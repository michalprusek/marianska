<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Admin Panel - Chata Mari√°nsk√°</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="/favicon.ico"
    />
    <link
      rel="stylesheet"
      href="css/styles-unified.css"
    />
    <link
      rel="stylesheet"
      href="css/mobile-improvements.css"
    />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link rel="stylesheet" href="css/admin.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1
            class="logo"
            data-translate="adminPanelTitle"
          >
            Admin Panel - Chata Mari√°nsk√°
          </h1>
          <nav class="nav">
            <button
              id="backBtn"
              class="btn btn-secondary btn-nav-hidden"
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path d="M19 12H5M5 12l7 7m-7-7l7-7" />
              </svg>
              Zpƒõt na kalend√°≈ô
            </button>
            <button
              id="logoutBtn"
              class="btn btn-secondary btn-nav-hidden"
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9" />
              </svg>
              Odhl√°sit
            </button>
          </nav>
        </div>
      </header>

      <!-- Login Form -->
      <div
        id="loginContainer"
        class="login-container"
      >
        <h2>P≈ôihl√°≈°en√≠ administr√°tora</h2>
        <form
          id="loginForm"
          class="mt-8"
        >
          <div class="input-group">
            <label
              for="password"
              class="label-title"
              >Heslo</label
            >
            <input
              type="password"
              id="password"
              required
              class="input-styled"
            />
          </div>
          <button
            type="submit"
            class="btn btn-primary btn-login"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
            >
              <path d="M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M15 12H3" />
            </svg>
            P≈ôihl√°sit
          </button>
        </form>
      </div>

      <!-- Admin Content -->
      <div
        id="adminContent"
        class="admin-container"
        class="hidden"
      >
        <!-- Tabs -->
        <div class="admin-tabs">
          <button
            class="tab-button active"
            data-tab="bookings"
          >
            Rezervace
          </button>
          <button
            class="tab-button"
            data-tab="blocked"
          >
            Blokovan√© term√≠ny
          </button>
          <button
            class="tab-button"
            data-tab="christmas"
          >
            V√°noƒçn√≠ p≈ô√≠stup
          </button>
          <button
            class="tab-button"
            data-tab="config"
          >
            Nastaven√≠ pokoj≈Ø a cen
          </button>
          <button
            class="tab-button"
            data-tab="statistics"
          >
            Statistiky
          </button>
          <button
            class="tab-button"
            data-tab="settings"
          >
            Nastaven√≠ syst√©mu
          </button>
        </div>

        <!-- Bookings Tab -->
        <div
          id="bookingsTab"
          class="tab-content active"
        >
          <h2>Spr√°va rezervac√≠</h2>
          <div class="mb-4">
            <div class="search-bar-container">
              <input
                type="text"
                id="searchBookings"
                placeholder="Hledat podle jm√©na, emailu nebo ƒç√≠sla rezervace..."
                class="input-search"
              />
            </div>
            <div
              id="bulkActionsContainer"
              class="bulk-actions-container"
            >
              <span
                id="selectedCount"
                class="text-primary-bold"
                >0 vybran√Ωch</span
              >
              <button
                id="bulkDeleteBtn"
                class="btn btn-bulk-delete"
                onclick="adminPanel.bulkDeleteBookings()"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6"
                  />
                  <line
                    x1="10"
                    y1="11"
                    x2="10"
                    y2="17"
                  />
                  <line
                    x1="14"
                    y1="11"
                    x2="14"
                    y2="17"
                  />
                </svg>
                Smazat vybran√©
              </button>
              <button
                id="bulkPrintBtn"
                class="btn btn-bulk-print"
                onclick="adminPanel.bulkPrintBookings()"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polyline points="6 9 6 2 18 2 18 9" />
                  <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2" />
                  <rect
                    x="6"
                    y="14"
                    width="12"
                    height="8"
                  />
                </svg>
                Tisknout vybran√©
              </button>
            </div>
          </div>
          <table class="bookings-table">
            <thead>
              <tr>
                <th class="w-40">
                  <input
                    type="checkbox"
                    id="selectAllCheckbox"
                    class="checkbox-styled"
                    onchange="adminPanel.toggleSelectAll(this.checked)"
                    title="Vybrat v≈°echny"
                  />
                </th>
                <th>ƒå√≠slo</th>
                <th>Jm√©no</th>
                <th>Email</th>
                <th>Platba benefitem</th>
                <th>Term√≠n</th>
                <th>Pokoje</th>
                <th>Cena</th>
                <th>Zaplaceno</th>
                <th>Akce</th>
              </tr>
            </thead>
            <tbody id="bookingsTableBody">
              <!-- Bookings will be populated here -->
            </tbody>
          </table>
        </div>

        <!-- Blocked Dates Tab -->
        <div
          id="blockedTab"
          class="tab-content"
        >
          <h2>Blokovan√© term√≠ny</h2>
          <div class="mb-8">
            <h3>P≈ôidat blokaci</h3>
            <form id="blockDateForm">
              <div class="form-grid-3col">
                <div class="input-group">
                  <label for="blockDateStart">Od data</label>
                  <input
                    type="date"
                    id="blockDateStart"
                    required
                  />
                </div>
                <div class="input-group">
                  <label for="blockDateEnd">Do data</label>
                  <input
                    type="date"
                    id="blockDateEnd"
                    required
                  />
                </div>
                <div class="input-group">
                  <label for="blockReason">D≈Øvod</label>
                  <input
                    type="text"
                    id="blockReason"
                    placeholder="√ödr≈æba, soukrom√° akce..."
                    class="w-200"
                  />
                </div>
              </div>

              <div class="mt-4">
                <label class="label-strong"
                  >Vyberte pokoje k blokov√°n√≠:</label
                >
                <div class="rooms-grid">
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      id="blockAll"
                      onchange="adminPanel.toggleAllRooms(this)"
                    />
                    <span class="fw-600">V≈°echny</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="12"
                    />
                    <span>P12</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="13"
                    />
                    <span>P13</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="14"
                    />
                    <span>P14</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="22"
                    />
                    <span>P22</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="23"
                    />
                    <span>P23</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="24"
                    />
                    <span>P24</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="42"
                    />
                    <span>P42</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="43"
                    />
                    <span>P43</span>
                  </label>
                  <label class="flex-center-clickable">
                    <input
                      type="checkbox"
                      class="room-checkbox"
                      value="44"
                    />
                    <span>P44</span>
                  </label>
                </div>
              </div>

              <button
                type="submit"
                class="btn btn-primary btn-icon-centered"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <path d="M12 5v14M5 12h14" />
                </svg>
                P≈ôidat blokaci
              </button>
            </form>
          </div>

          <h3>Aktu√°ln√≠ blokace</h3>
          <div
            id="blockedDatesList"
            class="blocked-dates-grid"
          >
            <!-- Blocked dates will be populated here -->
          </div>
        </div>

        <!-- Christmas Access Tab -->
        <div
          id="christmasTab"
          class="tab-content"
        >
          <h2>V√°noƒçn√≠ obdob√≠ a p≈ô√≠stupov√© k√≥dy</h2>

          <!-- Christmas Period Settings -->
          <div class="section-box">
            <h3 class="mb-4">Spr√°va v√°noƒçn√≠ch obdob√≠</h3>
            <p class="text-description">
              Definujte obdob√≠ ≈°koln√≠ch v√°noƒçn√≠ch pr√°zdnin. Tato obdob√≠ budou v kalend√°≈ôi vizu√°lnƒõ
              oznaƒçena.
            </p>

            <form id="christmasPeriodForm">
              <div class="form-grid form-grid-3col">
                <div class="input-group">
                  <label for="christmasStart">Zaƒç√°tek obdob√≠</label>
                  <input
                    type="date"
                    id="christmasStart"
                    required
                  />
                </div>
                <div class="input-group">
                  <label for="christmasEnd">Konec obdob√≠</label>
                  <input
                    type="date"
                    id="christmasEnd"
                    required
                  />
                </div>
                <button
                  type="submit"
                  class="btn btn-primary btn-end"
                >
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    class="inline-mr"
                  >
                    <path d="M12 5v14M5 12h14" />
                  </svg>
                  P≈ôidat obdob√≠
                </button>
              </div>
            </form>

            <h4 class="section-title-mt">Aktivn√≠ v√°noƒçn√≠ obdob√≠</h4>
            <div
              id="christmasPeriodsContainer"
              class="flex-col"
            >
              <!-- Christmas periods will be populated here -->
            </div>
          </div>

          <!-- Christmas Rules Info -->
          <div class="info-box-warning">
            <h4 class="section-title">
              ‚ö†Ô∏è Pravidla pro v√°noƒçn√≠ obdob√≠
            </h4>
            <ol class="rules-list">
              <li>
                <strong>Obdob√≠:</strong> ≈†koln√≠ v√°noƒçn√≠ pr√°zdniny a bezprost≈ôednƒõ p≈ôilehl√© v√≠kendy
              </li>
              <li>
                <strong>Do 30.9.:</strong> Zamƒõstnanci mohou rezervovat 1 pokoj (2 pokoje p≈ôi pln√©m
                obsazen√≠ rodinou)
              </li>
              <li><strong>Od 1.10.:</strong> Voln√° kapacita bez omezen√≠ dle po≈ôad√≠</li>
              <li>
                <strong>P≈ôi p≈ôevisu popt√°vky:</strong> Rozhoduje los (zajist√≠ provozn√≠ oddƒõlen√≠)
              </li>
            </ol>
          </div>

          <!-- Access Codes Section -->
          <h3>P≈ô√≠stupov√© k√≥dy pro zamƒõstnance</h3>
          <p class="section-header">
            Zamƒõstnanci s tƒõmito k√≥dy mohou rezervovat bƒõhem v√°noƒçn√≠ho obdob√≠ do 30.9. dan√©ho roku.
          </p>

          <div class="mb-8">
            <form
              id="addCodeForm"
              class="flex-gap-1"
            >
              <input
                type="text"
                id="newCode"
                placeholder="Zadejte p≈ô√≠stupov√Ω k√≥d"
                required
                class="input-flex"
              />
              <button
                type="submit"
                class="btn btn-primary p-btn"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="inline-mr"
                >
                  <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" />
                  <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
                </svg>
                P≈ôidat k√≥d
              </button>
            </form>
          </div>

          <h4 class="mt-6">Aktivn√≠ k√≥dy</h4>
          <div
            id="christmasCodesList"
            class="christmas-codes-list"
          >
            <!-- Codes will be populated here -->
          </div>
        </div>

        <!-- Room and Price Configuration Tab -->
        <div
          id="configTab"
          class="tab-content"
        >
          <h2>Nastaven√≠ pokoj≈Ø a cen</h2>

          <!-- Room Configuration - moved from settings -->
          <div class="section-box">
            <h3>Konfigurace pokoj≈Ø</h3>
            <p class="text-gray-fs09-mb">
              Nastavte kapacitu a typ ka≈æd√©ho pokoje
            </p>
            <form id="roomConfigForm">
              <div class="grid-auto-fill">
                <div class="input-group">
                  <label data-translate="room12">Pokoj 12</label>
                  <input
                    type="number"
                    id="room12_beds"
                    value="2"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room13">Pokoj 13</label>
                  <input
                    type="number"
                    id="room13_beds"
                    value="3"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room14">Pokoj 14</label>
                  <input
                    type="number"
                    id="room14_beds"
                    value="4"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room22">Pokoj 22</label>
                  <input
                    type="number"
                    id="room22_beds"
                    value="2"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room23">Pokoj 23</label>
                  <input
                    type="number"
                    id="room23_beds"
                    value="3"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room24">Pokoj 24</label>
                  <input
                    type="number"
                    id="room24_beds"
                    value="4"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room42">Pokoj 42</label>
                  <input
                    type="number"
                    id="room42_beds"
                    value="2"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room43">Pokoj 43</label>
                  <input
                    type="number"
                    id="room43_beds"
                    value="2"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
                <div class="input-group">
                  <label data-translate="room44">Pokoj 44</label>
                  <input
                    type="number"
                    id="room44_beds"
                    value="4"
                    min="1"
                    max="10"
                    class="w-100"
                  />
                </div>
              </div>
              <button
                type="submit"
                class="btn btn-primary btn-full-width-mt"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="inline-mr"
                >
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                  <polyline points="17 21 17 13 7 13 7 21" />
                </svg>
                Ulo≈æit konfiguraci pokoj≈Ø
              </button>
            </form>
          </div>

          <!-- Price Configuration - NEW Room-size-based (2025-10-17) -->
          <div class="section-box">
            <h3>Konfigurace cen√≠ku podle velikosti pokoj≈Ø</h3>
            <p class="text-description-lg">
              Ceny se li≈°√≠ podle velikosti pokoje. <strong>Mal√© pokoje:</strong> P12, P13, P22, P23,
              P42, P43 | <strong>Velk√© pokoje:</strong> P14, P24, P44
            </p>
            <form id="priceConfigForm">
              <div class="grid-gap-2rem">
                <!-- UTIA Employees -->
                <div>
                  <h4 class="section-header-primary">
                    Zlevnƒõn√© ceny (Zamƒõstnanci √öTIA)
                  </h4>
                  <p class="text-description">
                    Zlevnƒõn√° cena se uplatn√≠, pokud alespo≈à jedna osoba v pokoji na ni m√° n√°rok.
                  </p>

                  <!-- Small Rooms -->
                  <div class="card-white">
                    <h5 class="mb-3">
                      Mal√Ω pokoj (P12, P13, P22, P23, P42, P43)
                    </h5>
                    <div class="grid-gap">
                      <div class="flex-center">
                        <label class="min-w-180">Pr√°zdn√Ω pokoj:</label>
                        <input
                          type="number"
                          id="utia_small_base"
                          value="300"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">Dal≈°√≠ dospƒõl√Ω:</label>
                        <input
                          type="number"
                          id="utia_small_adult"
                          value="50"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">D√≠tƒõ (3-17 let):</label>
                        <input
                          type="number"
                          id="utia_small_child"
                          value="25"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                    </div>
                  </div>

                  <!-- Large Rooms -->
                  <div class="card-white">
                    <h5 class="mb-3">Velk√Ω pokoj (P14, P24, P44)</h5>
                    <div class="grid-gap">
                      <div class="flex-center">
                        <label class="min-w-180">Pr√°zdn√Ω pokoj:</label>
                        <input
                          type="number"
                          id="utia_large_base"
                          value="400"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">Dal≈°√≠ dospƒõl√Ω:</label>
                        <input
                          type="number"
                          id="utia_large_adult"
                          value="50"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">D√≠tƒõ (3-17 let):</label>
                        <input
                          type="number"
                          id="utia_large_child"
                          value="25"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- External Guests -->
                <div>
                  <h4 class="section-header-primary">
                    Pln√° cena (Extern√≠ host√©)
                  </h4>

                  <!-- Small Rooms -->
                  <div class="card-white">
                    <h5 class="mb-3">
                      Mal√Ω pokoj (P12, P13, P22, P23, P42, P43)
                    </h5>
                    <div class="grid-gap">
                      <div class="flex-center">
                        <label class="min-w-180">Pr√°zdn√Ω pokoj:</label>
                        <input
                          type="number"
                          id="external_small_base"
                          value="500"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">Dal≈°√≠ dospƒõl√Ω:</label>
                        <input
                          type="number"
                          id="external_small_adult"
                          value="100"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">D√≠tƒõ (3-17 let):</label>
                        <input
                          type="number"
                          id="external_small_child"
                          value="50"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                    </div>
                  </div>

                  <!-- Large Rooms -->
                  <div class="card-white">
                    <h5 class="mb-3">Velk√Ω pokoj (P14, P24, P44)</h5>
                    <div class="grid-gap">
                      <div class="flex-center">
                        <label class="min-w-180">Pr√°zdn√Ω pokoj:</label>
                        <input
                          type="number"
                          id="external_large_base"
                          value="600"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">Dal≈°√≠ dospƒõl√Ω:</label>
                        <input
                          type="number"
                          id="external_large_adult"
                          value="100"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                      <div class="flex-center">
                        <label class="min-w-180">D√≠tƒõ (3-17 let):</label>
                        <input
                          type="number"
                          id="external_large_child"
                          value="50"
                          min="0"
                          class="w-80"
                        />
                        <span>Kƒç/osoba/noc</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Info Box -->
                <div class="info-box-green">
                  <p class="text-green-fs09-m0">
                    ‚ÑπÔ∏è <strong>Dƒõti do 3 let jsou v≈ædy zdarma.</strong> Ceny jsou uvedeny za jednu
                    noc.
                  </p>
                </div>
              </div>

              <button
                type="submit"
                class="btn btn-primary btn-full-width mt-6"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="inline-mr"
                >
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                  <polyline points="17 21 17 13 7 13 7 21" />
                </svg>
                Ulo≈æit cen√≠k
              </button>
            </form>
          </div>

          <!-- Bulk Booking Price Configuration -->
          <div class="bulk-price-container">
            <h3 class="subsection-title-purple">Cen√≠k hromadn√© rezervace</h3>
            <p class="text-gray-fs09-mb">
              Nastavte ceny pro rezervaci cel√© chaty v jedin√©m term√≠nu
            </p>
            <form id="bulkPriceConfigForm">
              <div class="grid-gap-1-5rem">
                <!-- Base Price -->
                <div>
                  <h4 class="section-header-primary">Z√°kladn√≠ cena</h4>
                  <div class="flex-center">
                    <label class="label-min-w">Fixn√≠ cena za noc:</label>
                    <input
                      type="number"
                      id="bulk_base_price"
                      value="2000"
                      min="0"
                      class="w-100"
                    />
                    Kƒç/noc
                    <span class="text-hint"
                      >Z√°kladn√≠ poplatek za rezervaci cel√© chaty</span
                    >
                  </div>
                </div>

                <!-- Person Prices -->
                <div>
                  <h4 class="section-header-primary">
                    Poplatky za osoby
                  </h4>
                  <div class="grid-2col">
                    <div>
                      <h5 class="subsection-title-emerald">Zamƒõstnanci √öTIA</h5>
                      <div class="grid-gap">
                        <div class="flex-center">
                          <label class="min-w-120">Dospƒõl√Ω:</label>
                          <input
                            type="number"
                            id="bulk_utia_adult"
                            value="100"
                            min="0"
                            class="w-80"
                          />
                          Kƒç/osoba
                        </div>
                        <div class="flex-center">
                          <label class="min-w-120">D√≠tƒõ (3-17 let):</label>
                          <input
                            type="number"
                            id="bulk_utia_child"
                            value="0"
                            min="0"
                            class="w-80"
                          />
                          Kƒç/osoba
                        </div>
                      </div>
                    </div>
                    <div>
                      <h5 class="subsection-title-red">Extern√≠ host√©</h5>
                      <div class="grid-gap">
                        <div class="flex-center">
                          <label class="min-w-120">Dospƒõl√Ω:</label>
                          <input
                            type="number"
                            id="bulk_external_adult"
                            value="250"
                            min="0"
                            class="w-80"
                          />
                          Kƒç/osoba
                        </div>
                        <div class="flex-center">
                          <label class="min-w-120">D√≠tƒõ (3-17 let):</label>
                          <input
                            type="number"
                            id="bulk_external_child"
                            value="50"
                            min="0"
                            class="w-80"
                          />
                          Kƒç/osoba
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="info-box-green">
                    <p
                      class="text-green-fs09-m0"
                      data-translate="childrenUnder3Free"
                    ></p>
                  </div>
                </div>
              </div>
              <button
                type="submit"
                class="btn btn-primary btn-bulk-save"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="inline-mr"
                >
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                  <polyline points="17 21 17 13 7 13 7 21" />
                </svg>
                Ulo≈æit cen√≠k hromadn√© rezervace
              </button>
            </form>
          </div>
        </div>

        <!-- Statistics Tab -->
        <div
          id="statisticsTab"
          class="tab-content"
        >
          <h2>Statistiky</h2>

          <!-- Date Range Filter -->
          <div class="filter-toolbar">
            <div>
              <label class="form-label">Od:</label>
              <input type="month" id="statsFromDate" class="input-sm" />
            </div>
            <div>
              <label class="form-label">Do:</label>
              <input type="month" id="statsToDate" class="input-sm" />
            </div>
            <button onclick="adminPanel.loadStatistics()" class="button-primary btn-compact">
              üìä Filtrovat
            </button>
            <button onclick="adminPanel.resetStatisticsFilter()" class="button-secondary btn-compact">
              ‚Ü∫ Reset
            </button>
          </div>

          <div
            id="statistics"
            class="statistics-grid"
          >
            <!-- Statistics will be populated here -->
          </div>
        </div>

        <!-- Settings Tab -->
        <div
          id="settingsTab"
          class="tab-content"
        >
          <h2>Nastaven√≠ syst√©mu</h2>

          <div class="mb-8">
            <h3>Zmƒõna admin hesla</h3>
            <form
              id="changePasswordForm"
              class="max-w-400"
            >
              <div class="input-group">
                <label for="currentPassword">Souƒçasn√© heslo</label>
                <input
                  type="password"
                  id="currentPassword"
                  required
                />
              </div>
              <div class="input-group">
                <label for="newPassword">Nov√© heslo</label>
                <input
                  type="password"
                  id="newPassword"
                  required
                />
              </div>
              <div class="input-group">
                <label for="confirmPassword">Potvrzen√≠ nov√©ho hesla</label>
                <input
                  type="password"
                  id="confirmPassword"
                  required
                />
              </div>
              <button
                type="submit"
                class="btn btn-primary"
                class="p-btn"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="inline-mr"
                >
                  <rect
                    x="3"
                    y="11"
                    width="18"
                    height="11"
                    rx="2"
                    ry="2"
                  />
                  <path d="M7 11V7a5 5 0 0110 0v4" />
                </svg>
                Zmƒõnit heslo
              </button>
            </form>
          </div>

          <div class="mb-8">
            <h3>Kontaktn√≠ email</h3>
            <p class="section-header">
              Nastavte kontaktn√≠ emailovou adresu, kter√° se bude zobrazovat host≈Øm v potvrzovac√≠ch
              emailech a na webu.
            </p>
            <form
              id="contactEmailForm"
              class="max-w-500"
            >
              <div class="input-group">
                <label for="contactEmail">Kontaktn√≠ email *</label>
                <input
                  type="email"
                  id="contactEmail"
                  required
                  placeholder="chata@utia.cas.cz"
                />
              </div>
              <button
                type="submit"
                class="btn btn-primary btn-padded-mt"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="inline-mr"
                >
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                  <polyline points="17 21 17 13 7 13 7 21" />
                </svg>
                Ulo≈æit kontaktn√≠ email
              </button>
            </form>
          </div>

          <div class="mb-8">
            <h3>Spr√°vci syst√©mu</h3>
            <p class="section-header">
              Nastavte emailov√© adresy spr√°vc≈Ø, kte≈ô√≠ budou dost√°vat kopie v≈°ech emailov√Ωch
              notifikac√≠ p≈ôi vytvo≈ôen√≠, zmƒõnƒõ nebo zru≈°en√≠ rezervace. Spr√°vci obdr≈æ√≠ stejn√Ω email
              jako majitel rezervace.
            </p>
            <div
              id="adminEmailsList"
              class="mb-4"
            >
              <!-- Admin emails will be listed here -->
            </div>
            <form
              id="addAdminEmailForm"
              class="max-w-500"
            >
              <div class="flex-end">
                <div class="input-group flex-1-m0">
                  <label for="newAdminEmail">P≈ôidat spr√°vce</label>
                  <input
                    type="email"
                    id="newAdminEmail"
                    placeholder="admin@utia.cas.cz"
                    required
                  />
                </div>
                <button
                  type="submit"
                  class="btn btn-primary p-btn"
                >
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    class="inline-mr"
                  >
                    <path
                      d="M12 5v14M5 12h14"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                  </svg>
                  P≈ôidat
                </button>
              </div>
            </form>
          </div>

          <div class="mb-8">
            <h3>
              Spr√°vci chaty
              <span
                class="tooltip-icon help-icon"
                title="Spr√°vci chaty dostanou notifikace pouze pro zmƒõny platebn√≠ho stavu nebo √∫pravy ji≈æ zaplacen√Ωch rezervac√≠"
              >
                ‚ÑπÔ∏è
              </span>
            </h3>
            <p class="section-header">
              Nastavte emailov√© adresy spr√°vc≈Ø chaty, kte≈ô√≠ budou dost√°vat notifikace pouze p≈ôi:
            </p>
            <ul class="list-hint">
              <li>Zmƒõnƒõ platebn√≠ho stavu rezervace (zaplaceno ‚Üî nezaplaceno)</li>
              <li>Jak√©koliv √∫pravƒõ ji≈æ zaplacen√© rezervace</li>
            </ul>
            <p class="info-note">
              <strong>Pozn√°mka:</strong> Administr√°to≈ôi (v√Ω≈°e) dostanou email p≈ôi ka≈æd√© zmƒõnƒõ
              rezervace. Spr√°vci chaty pouze p≈ôi platb√°ch.
            </p>
            <div
              id="cabinManagerEmailsList"
              class="mb-4"
            >
              <!-- Cabin manager emails will be listed here -->
            </div>
            <form
              id="addCabinManagerEmailForm"
              class="max-w-500"
            >
              <div class="flex-end">
                <div class="input-group flex-1-m0">
                  <label for="newCabinManagerEmail">P≈ôidat spr√°vce chaty</label>
                  <input
                    type="email"
                    id="newCabinManagerEmail"
                    placeholder="spravce@utia.cas.cz"
                    required
                  />
                </div>
                <button
                  type="submit"
                  class="btn btn-primary p-btn"
                >
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    class="inline-mr"
                  >
                    <path
                      d="M12 5v14M5 12h14"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                  </svg>
                  P≈ôidat
                </button>
              </div>
            </form>
          </div>

          <div class="mb-8">
            <h3>≈†ablona potvrzovac√≠ho emailu</h3>
            <p class="section-header">
              Nastavte text emailu, kter√Ω obdr≈æ√≠ host√© po √∫spƒõ≈°n√© rezervaci. M≈Ø≈æete pou≈æ√≠t
              n√°sleduj√≠c√≠ promƒõnn√©:
            </p>
            <div class="code-block-container">
              <code class="fs-09">
                {booking_id} - ƒç√≠slo rezervace<br />
                {name} - jm√©no hosta<br />
                {start_date} - datum p≈ô√≠jezdu<br />
                {end_date} - datum odjezdu<br />
                {nights} - poƒçet noc√≠<br />
                {rooms} - seznam pokoj≈Ø<br />
                {total_price} - celkov√° cena<br />
                {price_overview} - detailn√≠ rozpis ceny po pokoj√≠ch<br />
                {adults} - poƒçet dospƒõl√Ωch<br />
                {children} - poƒçet dƒõt√≠<br />
                {toddlers} - poƒçet batolat<br />
                {edit_url} - odkaz pro √∫pravu rezervace
              </code>
            </div>

            <form id="emailTemplateForm">
              <div class="input-group">
                <label for="emailSubject">P≈ôedmƒõt emailu *</label>
                <input
                  type="text"
                  id="emailSubject"
                  value="Potvrzen√≠ rezervace - Chata Mari√°nsk√°"
                  required
                />
              </div>

              <div class="input-group">
                <label for="emailTemplate">
                  Text emailu *
                  <span class="text-normal-gray">
                    (max 600 znak≈Ø, edit link se p≈ôid√° automaticky)
                  </span>
                </label>
                <textarea
                  id="emailTemplate"
                  rows="15"
                  required
                  maxlength="600"
                  class="textarea-mono"
                >
Dobr√Ω den {name},

dƒõkujeme za rezervaci v Chatƒõ Mari√°nsk√°.

REZERVACE {booking_id}
P≈ô√≠jezd: {start_date}
Odjezd: {end_date}
Pokoje: {rooms}
Host√©: {adults} dospƒõl√Ωch, {children} dƒõt√≠

ROZPIS CENY:
{price_overview}

PLATBA
√öƒçet: 123456789/0300
VS: {booking_id}
Splatnost: 7 dn√≠

INFO
Check-in: 14:00 | Check-out: 10:00
Adresa: Mari√°nsk√° 1234, Pec pod Snƒõ≈ækou
Tel: +420 123 456 789

√öpravy nebo zru≈°en√≠:
{edit_url}

Tƒõ≈°√≠me se na V√°s!
T√Ωm Chata Mari√°nsk√°</textarea
                >
                <div class="char-count-row">
                  <span> <span id="emailTemplateCharCount">0</span> / 600 znak≈Ø </span>
                  <span
                    id="emailTemplateWarning"
                    class="error-text-hidden"
                  >
                    ‚ö†Ô∏è P≈ôekroƒçen limit
                  </span>
                </div>
              </div>

              <button
                type="submit"
                class="btn btn-primary btn-save-template"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  class="flex-shrink-0"
                >
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                  <polyline points="17 21 17 13 7 13 7 21" />
                  <polyline points="7 3 7 8 15 8" />
                </svg>
                Ulo≈æit ≈°ablonu emailu
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- Edit Booking Modal -->
      <div
        id="editBookingModal"
        class="modal"
      >
        <div
          class="modal-content modal-wide"
        >
          <button
            class="modal-close"
            onclick="adminPanel.closeEditModal()"
          >
            &times;
          </button>
          <h2 id="editModalTitle">Upravit rezervaci</h2>

          <!-- Tab navigation -->
          <div class="edit-tabs">
            <button
              class="edit-tab-btn active"
              data-tab="dates"
              onclick="adminPanel.editComponent.switchTab('dates')"
            >
              üìÖ Term√≠n a pokoje
            </button>
            <button
              class="edit-tab-btn"
              data-tab="billing"
              onclick="adminPanel.editComponent.switchTab('billing')"
            >
              üìã Fakturaƒçn√≠ √∫daje
            </button>
          </div>

          <form id="editBookingForm">
            <input
              type="hidden"
              id="editBookingId"
            />

            <!-- Dates and Rooms Tab -->
            <div
              id="editDatesTab"
              class="edit-tab-content"
            >
              <div class="edit-info-box">
                <p>
                  ‚ÑπÔ∏è <strong>Kliknƒõte na "Zmƒõnit term√≠n"</strong> u pokoje, kter√Ω chcete upravit.
                  Kalend√°≈ô zobraz√≠ p≈Øvodn√≠ term√≠n <strong class="highlight-blue">mod≈ôe</strong>.
                </p>
              </div>

              <!-- Two column layout: Calendar left, Rooms right -->
              <div class="edit-dates-layout">
                <div>
                  <div
                    id="editCalendarHeader"
                    class="edit-calendar-header"
                  >
                    <h3 class="mb-2">
                      Kalend√°≈ô - <span id="editingRoomName"></span>
                    </h3>
                    <button
                      type="button"
                      id="cancelRoomEditBtn"
                      class="btn btn-secondary p-btn-sm"
                    >
                      ‚úï Zav≈ô√≠t kalend√°≈ô
                    </button>
                  </div>
                  <div
                    id="editCalendarContainer"
                    class="hidden"
                  ></div>
                  <div
                    id="editSelectedDatesContainer"
                    class="edit-selected-dates-box"
                  >
                    <strong>Novƒõ vybran√Ω term√≠n:</strong>
                    <div
                      id="editSelectedDates"
                      class="edit-selected-dates-text"
                    >
                      Zat√≠m nevybr√°no
                    </div>
                  </div>
                  <button
                    type="button"
                    id="saveRoomDatesBtn"
                    class="btn btn-primary save-room-dates-btn"
                  >
                    ‚úì Ulo≈æit term√≠n
                  </button>
                </div>

                <div>
                  <h3>V≈°echny pokoje</h3>
                  <div
                    id="editRoomsList"
                    class="flex-col"
                  >
                    <!-- Rooms will be populated here -->
                  </div>

                  <div class="edit-price-box">
                    <strong data-translate="totalPrice">Celkov√° cena:</strong>
                    <div
                      id="editTotalPrice"
                      class="edit-price-value"
                    >
                      0 Kƒç
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Billing Information Tab -->
            <div
              id="editBillingTab"
              class="edit-tab-content hidden"
            >
              <div class="form-grid">
                <div class="input-group">
                  <label for="editName"
                    >Jm√©no a p≈ô√≠jmen√≠ <span class="required-asterisk">*</span></label
                  >
                  <input
                    type="text"
                    id="editName"
                  />
                </div>
                <div class="input-group">
                  <label for="editEmail">Email <span class="required-asterisk">*</span></label>
                  <input
                    type="email"
                    id="editEmail"
                  />
                </div>
                <div class="input-group">
                  <label for="editPhone">Telefon <span class="required-asterisk">*</span></label>
                  <input
                    type="tel"
                    id="editPhone"
                  />
                </div>
                <div class="input-group">
                  <label for="editCompany">Firma</label>
                  <input
                    type="text"
                    id="editCompany"
                  />
                </div>
                <div class="input-group full-width">
                  <label for="editAddress">Adresa <span class="required-asterisk">*</span></label>
                  <input
                    type="text"
                    id="editAddress"
                  />
                </div>
                <div class="input-group">
                  <label for="editCity">Mƒõsto <span class="required-asterisk">*</span></label>
                  <input
                    type="text"
                    id="editCity"
                  />
                </div>
                <div class="input-group">
                  <label for="editZip">PSƒå <span class="required-asterisk">*</span></label>
                  <input
                    type="text"
                    id="editZip"
                    pattern="[0-9]{5}"
                  />
                </div>
                <div class="input-group">
                  <label for="editIco">IƒåO</label>
                  <input
                    type="text"
                    id="editIco"
                  />
                </div>
                <div class="input-group">
                  <label for="editDic">DIƒå</label>
                  <input
                    type="text"
                    id="editDic"
                  />
                </div>
                <div class="input-group full-width">
                  <label
                    for="editNotes"
                    data-translate="notes"
                  >
                    Pozn√°mky
                  </label>
                  <textarea
                    id="editNotes"
                    rows="3"
                  ></textarea>
                </div>
                <div class="input-group full-width">
                  <label class="flex-center">
                    <input
                      type="checkbox"
                      id="editPayFromBenefit"
                      class="checkbox-inline"
                    />
                    <span>Platba z benefit≈Ø</span>
                  </label>
                </div>

                <!-- Guest Names Section -->
                <div
                  id="editGuestNamesSection"
                  class="input-group full-width edit-guest-names-section"
                >
                  <h3 data-translate="guestNamesTitle">üë• Jm√©na ubytovan√Ωch osob</h3>

                  <!-- Adults Names -->
                  <div
                    id="editAdultsNamesContainer"
                    class="mb-6"
                  >
                    <h4 class="text-green-mb3">Dospƒõl√≠ (18+ let)</h4>
                    <div id="editAdultsNamesList"></div>
                  </div>

                  <!-- Children Names -->
                  <div
                    id="editChildrenNamesContainer"
                    class="hidden"
                  >
                    <h4 class="text-green-mb3">Dƒõti (3-17 let)</h4>
                    <div id="editChildrenNamesList"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="modal-actions">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="document.getElementById('editBookingModal').classList.remove('active')"
              >
                Zru≈°it
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                id="editSubmitButton"
              >
                Ulo≈æit zmƒõny
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Success Message -->
      <div
        id="successMessage"
        class="success-message"
      ></div>
    </div>


    <!-- Shared utilities (MUST load before data.js) -->
    <script src="js/shared/idGenerator.js"></script>
    <script src="js/shared/domUtils.js"></script>
    <script src="js/shared/dateUtils.js"></script>
    <script src="js/shared/validationUtils.js"></script>
    <script src="js/shared/priceCalculator.js"></script>
    <script src="js/shared/christmasUtils.js"></script>
    <script src="js/shared/bookingLogic.js"></script>
    <script src="js/shared/bookingUtils.js"></script>
    <script src="js/shared/bookingDisplayUtils.js"></script>
    <script src="js/shared/GuestNameUtils.js"></script>
    <script src="js/shared/ModalDialog.js"></script>
    <script src="js/shared/BaseCalendar.js"></script>
    <script src="js/shared/EditBookingComponent.js"></script>
    <script src="js/calendar-utils.js"></script>

    <!-- Core modules -->
    <script src="data.js"></script>
    <script src="translations.js"></script>

    <!-- Admin module -->
    <script src="admin.js"></script>
  </body>
</html>
